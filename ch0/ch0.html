
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chapter 0 &#8212; Financial Modeling and Analytics Using Python</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Financial Modeling and Analytics" href="../intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Financial Modeling and Analytics Using Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Financial Modeling and Analytics
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Chapter 0
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/ch0/ch0.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/ch0/ch0.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#variables-and-data">
   Variables and Data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#inputting-and-printing-data">
     Inputting and Printing Data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#naming-variables-and-adding-comments">
     Naming Variables and Adding Comments
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-variable-types">
     Basic Variable Types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#math-with-variables">
   Math with Variables
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tests-of-in-equality">
     Tests of (In)Equality
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditionals">
     Conditionals
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#strings">
   Strings
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#escape-characters">
     Escape Characters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#characters">
     Characters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#searching-strings">
     Searching Strings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#string-concatenation">
     String Concatenation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#functions">
   Functions
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#plan-ahead">
     Plan Ahead
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combine-multiple-functions-for-maximal-efficiency">
     Combine Multiple Functions for Maximal Efficiency
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loops-and-lists">
   Loops and Lists
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-loops-and-lifetime-savings">
     <code class="docutils literal notranslate">
      <span class="pre">
       for
      </span>
     </code>
     Loops and Lifetime Savings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lists">
     Lists
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#for-loops-and-delayed-savings">
     <code class="docutils literal notranslate">
      <span class="pre">
       for
      </span>
     </code>
     Loops and Delayed Savings
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#robo-advising">
   Robo-Advising
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#type-conversions">
     Type Conversions
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#input">
     Input
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#homework-assignment">
   Homework Assignment
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#project-valuation-npv-vs-irr">
     Project Valuation: NPV vs. IRR
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="chapter-0">
<h1>Chapter 0<a class="headerlink" href="#chapter-0" title="Permalink to this headline">¶</a></h1>
<p>This chapter reviews the basic ingredients for writing Python programs.  The concepts presented in this chapter, such as using <code class="docutils literal notranslate"><span class="pre">if/else</span></code> logic to execute portions of code conditionally, are universal to any language (though the syntax may differ!).  Because Python is a fairly easy and readable language, it is the language of choice for this book.</p>
<div class="section" id="variables-and-data">
<h2>Variables and Data<a class="headerlink" href="#variables-and-data" title="Permalink to this headline">¶</a></h2>
<p>Variables store information.  All modeling and analytics requires data.  Once the data is input into Python, we can use statistical techniques to extract actionable information from the raw data.</p>
<div class="section" id="inputting-and-printing-data">
<h3>Inputting and Printing Data<a class="headerlink" href="#inputting-and-printing-data" title="Permalink to this headline">¶</a></h3>
<p>Below, variable <code class="docutils literal notranslate"><span class="pre">a</span></code> is defined to store the number 5.  Next, variable <code class="docutils literal notranslate"><span class="pre">b</span></code> is defined to store 5 (the value of <code class="docutils literal notranslate"><span class="pre">a</span></code>) plus 2, which is 7.  The sum of <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> is confirmed on line three of the following code cell.  If we run the cell, Python prints out <code class="docutils literal notranslate"><span class="pre">7</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">2</span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<p>By default, the last line of the cell will print out information to the user.  For example, to see the value of <code class="docutils literal notranslate"><span class="pre">a</span></code>, we could simply type:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<p>This approach is fairly limited.  If we want to see both the value of <code class="docutils literal notranslate"><span class="pre">a</span></code> and the value of <code class="docutils literal notranslate"><span class="pre">b</span></code>, the following will not achieve our goal:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<p>Remember, only the <em>last</em> line of code will print out.  In order to print multiple pieces of information, we use the <code class="docutils literal notranslate"><span class="pre">print()</span></code> function.  A <em>function</em> in Python is something that we will discuss in greater detail later on in this section.  For now, note that <code class="docutils literal notranslate"><span class="pre">print(a)</span></code> will print the value of <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">print(b)</span></code> will print the value of <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
7
</pre></div>
</div>
</div>
</div>
<p>Printing is simple, but remarkably important.  We will be feeding Python information to process (e.g. a firm’s financial statements, a consumer’s credit history, a set of stock returns, etc.).  Printing is useful to (1) verify that the information is correct in Python and (2) see the result of our data manipulation.  For instance, suppose that we feed Python a portfolio of individual stock returns.  After instructing Python on how to do some statistical analysis, we will be able to calculate the portfolio’s Sharpe ratio.  That information needs to be printed out back to us, the user, in order to know whether the portfolio does well (in a risk-return sense).</p>
<p>Note that the last line of your code cell will always print out, even if it is redundant.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>7
</pre></div>
</div>
</div>
</div>
<p>That last line of code will not print out anything, however, if there is nothing that warrants printing.  This statement will make a little bit more sense later on once we talk about functions in more detail.  For now, observe that if we define a variable (e.g. <code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">8</span></code>) then nothing will print out.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="mi">8</span>
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  In the following code cell, perform four tasks (each task should be done on a new line of code).  First, define a variable <code class="docutils literal notranslate"><span class="pre">net_income</span></code> to be equal to <code class="docutils literal notranslate"><span class="pre">10</span></code>.  Second, define a variable <code class="docutils literal notranslate"><span class="pre">total_assets</span></code> equal to <code class="docutils literal notranslate"><span class="pre">30</span></code>.  Third, define a variable <code class="docutils literal notranslate"><span class="pre">roa</span></code> equal to <code class="docutils literal notranslate"><span class="pre">net_income</span></code> divided by <code class="docutils literal notranslate"><span class="pre">total_assets</span></code>.  Fourth, print out the value of <code class="docutils literal notranslate"><span class="pre">roa</span></code>.  <strong>Hint:</strong> division in Python is done with the <code class="docutils literal notranslate"><span class="pre">/</span></code> character, so if we set <code class="docutils literal notranslate"><span class="pre">x</span></code> equal to <span class="math notranslate nohighlight">\(1\)</span> divided by <span class="math notranslate nohighlight">\(3\)</span> we would type <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">1/3</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="naming-variables-and-adding-comments">
<h3>Naming Variables and Adding Comments<a class="headerlink" href="#naming-variables-and-adding-comments" title="Permalink to this headline">¶</a></h3>
<p>Variable names must start with a letter, and can contain letters, numbers, and underscores.  In general, variables should be named in a descriptive manner.  For example, if you have information about a firm’s cost of capital, storing that information in a variable named <code class="docutils literal notranslate"><span class="pre">x</span></code> is a horrible idea.</p>
<p>You should always strive to make your code <em>readable</em>.  What this means is that it should be relatively easy to open up code that your wrote earlier and know what it does.  Adding inteligent variable names helps tremendously.  Consider the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">e</span> <span class="o">+</span> <span class="n">c</span> <span class="o">/</span> <span class="p">(</span><span class="n">c</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="n">f</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<p>Can you tell what the above line of code does?  If you live and breathe finance formulas, the pattern of the equation above <em>may</em> be familiar.  We can all agree, however, that the mystery is much easier to solve if we simply give the variables more meaningful names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wacc</span> <span class="o">=</span> <span class="n">equity</span> <span class="o">/</span> <span class="p">(</span><span class="n">debt</span><span class="o">+</span><span class="n">equity</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost_of_equity</span> <span class="o">+</span> <span class="n">debt</span> <span class="o">/</span> <span class="p">(</span><span class="n">debt</span><span class="o">+</span><span class="n">equity</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost_of_debt</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">tax_rate</span><span class="p">)</span>
</pre></div>
</div>
<p>One method of making long variable names readable is, as shown above, to space out words via underscores.</p>
<p>That is, if you have a variable that contains a firm’s cost of capital as its information, it is better to name this something like <code class="docutils literal notranslate"><span class="pre">cost_of_capital</span></code> or <code class="docutils literal notranslate"><span class="pre">costOfCapital</span></code> rather than a non-descriptive name like <code class="docutils literal notranslate"><span class="pre">a</span></code> or <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p>
<p>Note that you can use <code class="docutils literal notranslate"><span class="pre">#</span></code> to add comments to your code.</p>
<p>Python will ignore everything on a line following a <code class="docutils literal notranslate"><span class="pre">#</span></code> symbol.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">accountsreceiveable</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
<p>Even for short(ish) phrases like “accounts receiveable”, squishing all of the characters together into one long word renders the variable name difficult to read.  The underscore naming method would use:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">accounts_receiveable</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
<p>which is much easier to read.  Others prefer the “camel hump” method:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">accountsReceiveable</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
<p>and whether you use underscores or camel humps is down to personal preference.  Using neither underscores nor humps, however, violates rules of good programming.</p>
<p>Let’s return to example formula</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wacc</span> <span class="o">=</span> <span class="n">equity</span> <span class="o">/</span> <span class="p">(</span><span class="n">debt</span><span class="o">+</span><span class="n">equity</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost_of_equity</span> <span class="o">+</span> <span class="n">debt</span> <span class="o">/</span> <span class="p">(</span><span class="n">debt</span><span class="o">+</span><span class="n">equity</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost_of_debt</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">tax_rate</span><span class="p">)</span>
</pre></div>
</div>
<p>Besides good variable naming, we can make the code more readable by including <em>comments</em>.  Comments are notes that programmers leave inside code.  These notes are not read by Python when Python goes through to run the code that’s been written.  The following code cell will not run successfully.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">define</span> <span class="n">c</span> <span class="n">equal</span> <span class="n">a</span> <span class="n">plus</span> <span class="n">b</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">  File</span><span class="nn"> &quot;&lt;ipython-input-11-a8368e710330&gt;&quot;</span><span class="gt">, line </span><span class="mi">1</span>
    <span class="n">define</span> <span class="n">c</span> <span class="n">equal</span> <span class="n">a</span> <span class="n">plus</span> <span class="n">b</span>
           <span class="o">^</span>
<span class="ne">SyntaxError</span>: invalid syntax
</pre></div>
</div>
</div>
</div>
<p>The code fails because the statement</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">define</span> <span class="n">c</span> <span class="n">to</span> <span class="n">equal</span> <span class="n">a</span> <span class="n">plus</span> <span class="n">b</span>
</pre></div>
</div>
<p>is something that Python thinks is code.  To transform the note into a comment so that Python ignores it, we use the <code class="docutils literal notranslate"><span class="pre">#</span></code> character.  Python ignores the <code class="docutils literal notranslate"><span class="pre">#</span></code> character and everything that follows it.  Use this to take notes about what’s happening in the code.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define c to equal a plus b</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
</pre></div>
</div>
</div>
</div>
<p>Using comments, the “nicest” version of the example formula is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># compute the weighted average cost of capital</span>
<span class="n">wacc</span> <span class="o">=</span> <span class="n">equity</span> <span class="o">/</span> <span class="p">(</span><span class="n">debt</span><span class="o">+</span><span class="n">equity</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost_of_equity</span> <span class="o">+</span> <span class="n">debt</span> <span class="o">/</span> <span class="p">(</span><span class="n">debt</span><span class="o">+</span><span class="n">equity</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost_of_debt</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">tax_rate</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that comments can appear on the same line as some Python code.  When this happens, Python stops reading the line of code at the <code class="docutils literal notranslate"><span class="pre">#</span></code> character.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="c1"># let c equal a plus b</span>
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  In the following code cell, perform 6 tasks (each task should be its own line of code).  First, enter a comment that reads “apply the Gordon growth model”.  Second, define a variable <code class="docutils literal notranslate"><span class="pre">d</span></code> equal to <code class="docutils literal notranslate"><span class="pre">5</span></code> and add a comment at the end of the line that says “dividend”.  Third, define a variable <code class="docutils literal notranslate"><span class="pre">r</span></code> equal to <code class="docutils literal notranslate"><span class="pre">0.1</span></code> and add a comment at the end of the line that says “discount rate”.  Fourth, define a variable <code class="docutils literal notranslate"><span class="pre">g</span></code> equal to <code class="docutils literal notranslate"><span class="pre">0.02</span></code> and add a comment at the end of the line that says “dividend growth rate”.   Fifth, define a variable <code class="docutils literal notranslate"><span class="pre">v</span></code> equal to <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">/</span> <span class="pre">(r-g)</span></code>.  Sixth, print out the value of <code class="docutils literal notranslate"><span class="pre">v</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="basic-variable-types">
<h3>Basic Variable Types<a class="headerlink" href="#basic-variable-types" title="Permalink to this headline">¶</a></h3>
<p>There are a handful of basic variable types.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>        <span class="c1"># a is an integer (there is no decimal point)</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">1.5</span>      <span class="c1"># floating point number (in general, don&#39;t worry about integer vs. floating point)</span>
<span class="n">c</span> <span class="o">=</span> <span class="kc">False</span>    <span class="c1"># c is a Boolean</span>
<span class="n">d</span> <span class="o">=</span> <span class="s1">&#39;banana&#39;</span> <span class="c1"># d is a string</span>
</pre></div>
</div>
</div>
</div>
<p>We won’t worry too much about the distinction between integers and floating points.  To us, both are just numbers.</p>
<p><em>Boolean</em> variable types, named after George Boole, are either equal to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> (note the capital <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="docutils literal notranslate"><span class="pre">F</span></code>).  We will see some examples of Boolean values later on in this section.</p>
<p>Strings store characters (e.g. single values like <code class="docutils literal notranslate"><span class="pre">'c'</span></code> or <code class="docutils literal notranslate"><span class="pre">'%'</span></code>) and words (combinations of characters like <code class="docutils literal notranslate"><span class="pre">'cat'</span></code> or <code class="docutils literal notranslate"><span class="pre">'dog'</span></code>).  The characters/words in strings are encased in either single quotes like <code class="docutils literal notranslate"><span class="pre">'cat'</span></code> or double quotes like <code class="docutils literal notranslate"><span class="pre">&quot;dog&quot;</span></code>.  In Python, whether you use single quotes or double quotes usually doesn’t matter.</p>
<p><span style="color:red"><strong>Concept check</strong>:</span>  In the following code cell, complete each comment to indicate the likely variable type of a given piece of information.  The first line is completed for you, as an example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># shares outstanding: integer</span>
<span class="c1"># cost of equity capital:</span>
<span class="c1"># leverage ratio:</span>
<span class="c1"># stock ticker symbol:</span>
<span class="c1"># number of options awarded to the CEO:</span>
<span class="c1"># amount of assets under management:</span>
<span class="c1"># name of the company&#39;s largest shareholder:</span>
<span class="c1"># number of stocks in the portfolio:</span>
</pre></div>
</div>
</div>
</div>
<p>Programming is useful because variables can store <em>lots</em> of information (more than just a single number or word!).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># e is a list</span>
<span class="n">f</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;word 1&#39;</span><span class="p">:</span><span class="s1">&#39;definition 1&#39;</span><span class="p">,</span> <span class="s1">&#39;word 2&#39;</span><span class="p">:</span><span class="s1">&#39;definition 2&#39;</span><span class="p">}</span> <span class="c1"># f is a dictionary</span>
</pre></div>
</div>
</div>
</div>
<p>Above, variable <code class="docutils literal notranslate"><span class="pre">e</span></code> stores information about multiple numbers.  Lists can store lots of things, not just numbers.  For example, the list <code class="docutils literal notranslate"><span class="pre">fang</span> <span class="pre">=</span> <span class="pre">['FB',</span> <span class="pre">'AMZN',</span> <span class="pre">'NFLX',</span> <span class="pre">'GOOG']</span></code> stores a list of string variables, where each string corresponds to one of the ticker symbols for the FANG stocks.</p>
<p>Above, variable <code class="docutils literal notranslate"><span class="pre">f</span></code> stores information about words and their meanings.  Like lists, dictionaries can store lots of things.  For example <code class="docutils literal notranslate"><span class="pre">FB</span> <span class="pre">=</span> <span class="pre">{'3/23/20':148.10,</span> <span class="pre">'3/24/20':160.98,</span> <span class="pre">'3/25/20':156.21,</span> <span class="pre">'3/26/20':163.34,</span> <span class="pre">'3/27/20':156.79}</span></code> records daily stock price information for Facebook, Inc. for the week of March 23, 2020.  Dictionary variables hold <em>keys</em> (e.g. a word to look up) and <em>values</em> (e.g. the definition of the word).  Here, the key is a string that records the date, and the value is a floating point number that corresponds to the stock price.</p>
<p>We’ll return to lists and dictionaries later, including a discussion of how to modify/update data inside the list/dictionary, as well as instructions for accessing single items within a list/dictionary.  For now, we’ll work with variables that hold single pieces of information for the sake of simplicity.  But note that variables can store lots of data simultaneously, and that’s what makes programming truly useful for financial practioners.</p>
</div>
</div>
<div class="section" id="math-with-variables">
<h2>Math with Variables<a class="headerlink" href="#math-with-variables" title="Permalink to this headline">¶</a></h2>
<p>Amongst the above variable types, integer and floating point numbers are a nice place to start because there are a number of straight forward operations that can be applied to these variables.  For instance, as shown above, we can add numbers together with <code class="docutils literal notranslate"><span class="pre">+</span></code>.  Subtraction, multiplication, and division work in similar ways:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Operator</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Addition</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2+3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Subtraction</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5-3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Multiplication</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2*3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">6</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Division</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">6/3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
</tr>
</tbody>
</table>
<p>Beyond these four basic arithmatic operations, there are two extra operations to know:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Operator</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Exponentiation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">**</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3**2</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">9</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Modulus</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4%3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
</tr>
</tbody>
</table>
<p>The former, exponentiation, is key to many financial applications (e.g. time value of money).  Do not mistake <code class="docutils literal notranslate"><span class="pre">**</span></code> and <code class="docutils literal notranslate"><span class="pre">^</span></code>!  While <code class="docutils literal notranslate"><span class="pre">^</span></code> may look more familiar as an exponentiation symbol, it has an entirely different meaning in Python.</p>
<p>These arithmatic operators perform basic tasks with stored data.  For instance, if we have variables corresponding to debt and equity, we can calculate leverage.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">debt</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">equity</span> <span class="o">=</span> <span class="mi">80</span>

<span class="n">leverage</span> <span class="o">=</span> <span class="p">(</span><span class="n">debt</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">debt</span><span class="o">+</span><span class="n">equity</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">leverage</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.2
</pre></div>
</div>
</div>
</div>
<p>Similarly, if we needed to know the holding period return of an investment of <span class="math notranslate nohighlight">\(\$500\)</span> that earns <span class="math notranslate nohighlight">\(2\%\)</span> per year for <span class="math notranslate nohighlight">\(3\)</span> years, we could use these Python operators to find that out.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">500</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">+.</span><span class="mi">02</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span>  <span class="o">/</span> <span class="mi">500</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.06120800000000015
</pre></div>
</div>
</div>
</div>
<p>One important thing to note is that we can only nest operations inside of parentheses.  In textbooks, you may see mathematical formulas that make use of <em>curly</em> brackets, <span class="math notranslate nohighlight">\(\{\)</span> and <span class="math notranslate nohighlight">\(\}\)</span>, or <em>square</em> brackets, <span class="math notranslate nohighlight">\([\)</span> and <span class="math notranslate nohighlight">\(]\)</span>.  For example <span class="math notranslate nohighlight">\(x = \big[\big(\frac{1}{3}\big)^2 + 5\big]^{1/2}\)</span> makes use of square brackets.  In Python, square and curly brackets have special meanings and can’t be used to nest mathematical expressions.  The example equation given here is translated into Python as:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">((</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.260776661041756
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Suppose that you anticipate a payment of <span class="math notranslate nohighlight">\(\$100\)</span> two years from now.  The annual discount rate is <span class="math notranslate nohighlight">\(5\%\)</span>.  Calculate the present value of this payment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="tests-of-in-equality">
<h3>Tests of (In)Equality<a class="headerlink" href="#tests-of-in-equality" title="Permalink to this headline">¶</a></h3>
<p>We can compare the relative value of two number variables (either integers or floating points or a combination of the two types).</p>
<p>For example, define two variables, <code class="docutils literal notranslate"><span class="pre">debt_longterm</span></code> and <code class="docutils literal notranslate"><span class="pre">debt_shortterm</span></code>, that store information about a company’s long term and short term debt, respectively.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">debt_longterm</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">debt_shortterm</span> <span class="o">=</span> <span class="mi">2000</span>
</pre></div>
</div>
</div>
</div>
<p>We can check for whether long term debt exceeds short term debt with the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> character.  This test returns a <em>Boolean</em> value (True or False).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">debt_longterm</span> <span class="o">&gt;</span> <span class="n">debt_shortterm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>As you might expect, we can also use <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">=</span></code> characters for other tests.  For instance:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">debt_longterm</span> <span class="o">&lt;=</span> <span class="n">debt_shortterm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>We have to be careful with tests of equality, however.  Remember, we used <code class="docutils literal notranslate"><span class="pre">=</span></code> to tell Python what information a variable should store.  For example, <code class="docutils literal notranslate"><span class="pre">x=7</span></code> tells Python that the variable <code class="docutils literal notranslate"><span class="pre">x</span></code> should store the number seven.  Thus, if we want to test for whether the information stored in <code class="docutils literal notranslate"><span class="pre">x</span></code> equals seven, we type</p>
<div class="highlight-Python3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">==</span> <span class="mi">7</span>
</pre></div>
</div>
<p>with a double <code class="docutils literal notranslate"><span class="pre">==</span></code> to denote that we’re testing for equality.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Related to the <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">=</span></code> characters is the word <code class="docutils literal notranslate"><span class="pre">in</span></code>.  In Python, the word <code class="docutils literal notranslate"><span class="pre">in</span></code> has a special meaning, so you can’t define a variable with the name <code class="docutils literal notranslate"><span class="pre">in</span></code>.  The word <code class="docutils literal notranslate"><span class="pre">in</span></code> is used to check for whether a value appears in a list.  Use of the word <code class="docutils literal notranslate"><span class="pre">in</span></code>, like the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> or other tests of (in)equality, results in Python returning a Boolean value.</p>
<p>As an example, define <code class="docutils literal notranslate"><span class="pre">tic</span></code> to be one stock ticker of interest and <code class="docutils literal notranslate"><span class="pre">tickers</span></code> to be a list of stock tickers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tic</span> <span class="o">=</span> <span class="s1">&#39;AAPL&#39;</span>
<span class="n">tickers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;AAPL&#39;</span><span class="p">,</span><span class="s1">&#39;MSFT&#39;</span><span class="p">,</span><span class="s1">&#39;AMD&#39;</span><span class="p">,</span><span class="s1">&#39;NVDA&#39;</span><span class="p">,</span><span class="s1">&#39;INTC&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We can check for whether the value stored in <code class="docutils literal notranslate"><span class="pre">tic</span></code> appears in the list of items held in <code class="docutils literal notranslate"><span class="pre">tickers</span></code> by using the word <code class="docutils literal notranslate"><span class="pre">in</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tic</span> <span class="ow">in</span> <span class="n">tickers</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  A project is anticipated to pay out <span class="math notranslate nohighlight">\(\$50\)</span> thousand next year and <span class="math notranslate nohighlight">\(\$75\)</span> thousand the year after, after which time the project will terminate.  The project will cost <span class="math notranslate nohighlight">\(\$100\)</span> thousand now to initiate.  The discount rate is <span class="math notranslate nohighlight">\(5\%\)</span>.  In one line of code, estimate the NPV of the project.  In a second line of code, test whether this value is greater than zero so that the printout from executing the code block is the statement <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="conditionals">
<h3>Conditionals<a class="headerlink" href="#conditionals" title="Permalink to this headline">¶</a></h3>
<p>Conditionals specify that a certain bit of code should run <em>conditional</em> on a statement being true or false.</p>
<p>Like user-written functions, the block of code that runs conditionally is indented.</p>
<p>In the example below, we define information about a firm’s current assets and current liabilities.  Then we calculate the current ratio to see if the firm has enough current assets to cover its current liabilities.  The code incorporates a rule of thumb and tells the user that a current ratio above <span class="math notranslate nohighlight">\(1.5\)</span> is okay, a current ratio below <span class="math notranslate nohighlight">\(1.5\)</span> but above <span class="math notranslate nohighlight">\(1\)</span> is risky, and a current ratio below <span class="math notranslate nohighlight">\(1\)</span> is dangerous.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">current_assets</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">current_liabilities</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">current_ratio</span> <span class="o">=</span> <span class="n">current_assets</span> <span class="o">/</span> <span class="n">current_liabilities</span>

<span class="nb">print</span><span class="p">(</span><span class="n">current_ratio</span><span class="p">)</span>
<span class="k">if</span> <span class="n">current_ratio</span> <span class="o">&gt;</span> <span class="mf">1.5</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Firm is okay!&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">current_ratio</span> <span class="o">&lt;=</span> <span class="mf">1.5</span> <span class="ow">and</span> <span class="n">current_ratio</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Firm looks risky&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Danger!  Firm needs some cash&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.6666666666666667
Firm is okay!
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="strings">
<h2>Strings<a class="headerlink" href="#strings" title="Permalink to this headline">¶</a></h2>
<p>Strings are a simple but powerful tool for storing non-numerical information.</p>
<p>String variables store textual data.  To tell Python that we want to treat some text as a string, we use either single quotations <code class="docutils literal notranslate"><span class="pre">'</span></code> or double quotations <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>.  Either format is a valid approach.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fruit</span> <span class="o">=</span> <span class="s1">&#39;banana&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vegetable</span> <span class="o">=</span> <span class="s2">&quot;carrot&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Use of single or double quotes can make nested quotations easier.  For instance, what if you want to use an apostrophe inside a string variable?  Consider the apostrophe in:</p>
<blockquote>
<div><p>This isn’t an interesting sentence.</p>
</div></blockquote>
<p>In that case, be sure to use double quotes to mark your string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sent</span> <span class="o">=</span> <span class="s2">&quot;This isn&#39;t an interesting sentence.&quot;</span> <span class="c1"># this code will work</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sent</span> <span class="o">=</span> <span class="s1">&#39;This isn&#39;</span><span class="n">t</span> <span class="n">an</span> <span class="n">interesting</span> <span class="n">sentence</span><span class="o">.</span> <span class="c1"># this has problems</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">  File</span><span class="nn"> &quot;&lt;ipython-input-4-fcbf08c4a876&gt;&quot;</span><span class="gt">, line </span><span class="mi">1</span>
    <span class="n">sent</span> <span class="o">=</span> <span class="s1">&#39;This isn&#39;</span><span class="n">t</span> <span class="n">an</span> <span class="n">interesting</span> <span class="n">sentence</span><span class="o">.</span> <span class="c1"># this has problems</span>
                     <span class="o">^</span>
<span class="ne">SyntaxError</span>: invalid syntax
</pre></div>
</div>
</div>
</div>
<p>Because Python won’t be able to differentiate between the <code class="docutils literal notranslate"><span class="pre">'</span></code> character being used as an apostrophe and the <code class="docutils literal notranslate"><span class="pre">'</span></code> character being used to signify a single quote, the easiest way to enter the above example into Python is to use double quotes for the string.</p>
<p>Similarly, use single quotes to mark the string if you want to include double quotes inside the string.  Consider the example:</p>
<blockquote>
<div><p>Bob said, “Yes, that is a boring sentence.”</p>
</div></blockquote>
<p>In this case, the easiest way to do things is to enter this as a string in Python is to use single quotes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quote</span> <span class="o">=</span> <span class="s1">&#39;Bob said, &quot;Yes, that is a boring sentence.&quot;&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="escape-characters">
<h3>Escape Characters<a class="headerlink" href="#escape-characters" title="Permalink to this headline">¶</a></h3>
<p>The trickiest problem with quotations is something like the following example:</p>
<blockquote>
<div><p>Bob said, “Yes, that’s a boring sentence.”</p>
</div></blockquote>
<p>Note that the textual data we want to include here has both double quotes and a single quote inside the data.  To enter this text into Python as a string variable, we need to use an <strong>escape character</strong>.</p>
<p>Escape characters are special commands inside of a string variable that tell Python that the data is something special.  Without an escape character inside a string, Python interprets every character literally.  For instance, the literal interpretation of <code class="docutils literal notranslate"><span class="pre">n</span></code> is that it represents the letter “n”.  The literal interpretation of <code class="docutils literal notranslate"><span class="pre">'</span></code> is that it represents a single quote.  We can “escape” from this literal interpretation of a character by prefacing that character with <code class="docutils literal notranslate"><span class="pre">\</span></code>.  The <code class="docutils literal notranslate"><span class="pre">\</span></code> symbol tells Python to treat the information following the <code class="docutils literal notranslate"><span class="pre">\</span></code> specially.  In the example here, <code class="docutils literal notranslate"><span class="pre">\'</span></code> will tell Python that the <code class="docutils literal notranslate"><span class="pre">'</span></code> character is to be treated as part of the data, rather than a potential end for a single quoted string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">quote</span> <span class="o">=</span> <span class="s1">&#39;Bob said, &quot;Yes, that</span><span class="se">\&#39;</span><span class="s1">s a boring sentence.&quot;&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">quote</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Bob said, &quot;Yes, that&#39;s a boring sentence.&quot;
</pre></div>
</div>
</div>
</div>
<p>There are only a handful of escape characters to remember.  The rest can be Googled if you need them.  The escape characters worth remembering are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\'</span></code>: tells Python to treat <code class="docutils literal notranslate"><span class="pre">'</span></code> as a single quote (apostrophe) inside the string data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code>: tells Python to treat <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> as a double quote inside the string data</p></li>
<li><p>‘\n’ : tells Python to enter a line break.</p></li>
<li><p>‘\t’ : tells Python to enter a tab.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Line one of text.</span><span class="se">\n</span><span class="s1">Line two of text&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Line one of text.
Line two of text
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">This is an indented sentenece.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>	This is an indented sentenece.
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Set the variable, <code class="docutils literal notranslate"><span class="pre">v</span></code>, below equal to a string such that the second line evaluates to (aka prints out) the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">That</span> <span class="n">isn</span><span class="s1">&#39;t a smart investment.</span>
<span class="n">You</span> <span class="n">should</span> <span class="n">but</span> <span class="n">Dogecoin</span> <span class="n">instead</span><span class="o">.</span>
    <span class="p">(</span><span class="n">just</span> <span class="n">kidding</span><span class="p">)</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
<span class="n">v</span> <span class="o">=</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="characters">
<h3>Characters<a class="headerlink" href="#characters" title="Permalink to this headline">¶</a></h3>
<p>A string is a collection of characters.  The string <code class="docutils literal notranslate"><span class="pre">'cat'</span></code> is comprised of the individual characters <code class="docutils literal notranslate"><span class="pre">'c'</span></code>, <code class="docutils literal notranslate"><span class="pre">'a'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'t'</span></code>.  The string <code class="docutils literal notranslate"><span class="pre">'my\ncat'</span></code> is made up of the characters <code class="docutils literal notranslate"><span class="pre">'m'</span></code>, <code class="docutils literal notranslate"><span class="pre">'y'</span></code>, <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>, <code class="docutils literal notranslate"><span class="pre">'c'</span></code>, <code class="docutils literal notranslate"><span class="pre">'a'</span></code>, <code class="docutils literal notranslate"><span class="pre">'t'</span></code>.  Note that the third character in this latter example is an escape character <code class="docutils literal notranslate"><span class="pre">'\n</span></code>’ rather than an alphanumeric character (the letters <code class="docutils literal notranslate"><span class="pre">'a'</span></code>-<code class="docutils literal notranslate"><span class="pre">'z'</span></code> or numbers <code class="docutils literal notranslate"><span class="pre">'0'</span></code>-<code class="docutils literal notranslate"><span class="pre">'9'</span></code>) or a symbol (e.g. <code class="docutils literal notranslate"><span class="pre">'!'</span></code>, <code class="docutils literal notranslate"><span class="pre">'&#64;'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'#'</span></code>).</p>
<p>Becuase strings are comprised of characters, it is helpful to know how to access individual characters of those strings.  We will work with the examples <code class="docutils literal notranslate"><span class="pre">'AAPL</span> <span class="pre">Stock'</span></code> and <code class="docutils literal notranslate"><span class="pre">'F</span> <span class="pre">Stock'</span></code> for a moment.  These two strings are items that we may come accross in a written document.  Suppose that we need to extract the ticker names from these strings.  For instance, if these strings are items that we’ve extracted from a news article or a tweet, then finding the ticker names helps us determine what the subject of the article/tweet is.</p>
<p>The first character of a string is the <span class="math notranslate nohighlight">\(0^{th}\)</span> character in the string.  This is a quirk of Python, along with a number of many other programming languages.  Python begins counting at zero, rather than at one.  Hence, the first character is character <span class="math notranslate nohighlight">\(0\)</span>, the second character is character number <span class="math notranslate nohighlight">\(1\)</span>, etc.  We can select character number <span class="math notranslate nohighlight">\(n\)</span> with square brackets that follow immediately after the string name.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;cat&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>a
</pre></div>
</div>
</div>
</div>
<p>Along with selecting a single character with its position in the string, we can choose a subset of characters with a set of sequential numbers.  Such numbers are listed with a starting point and ending point.  For instance, if we want the numbers <span class="math notranslate nohighlight">\(1\)</span>, <span class="math notranslate nohighlight">\(2\)</span>, <span class="math notranslate nohighlight">\(3\)</span>, then we would indicate the starting point of <span class="math notranslate nohighlight">\(1\)</span> and the ending point of <span class="math notranslate nohighlight">\(4\)</span>.  Yes, <span class="math notranslate nohighlight">\(4\)</span>, <em>not</em> <span class="math notranslate nohighlight">\(3\)</span>.  The ending point is the number <em>after</em> the last number to be included.</p>
<p>Consequently, <code class="docutils literal notranslate"><span class="pre">0:2</span></code> would select characters number <span class="math notranslate nohighlight">\(0\)</span> and <span class="math notranslate nohighlight">\(1\)</span> because the starting point is <span class="math notranslate nohighlight">\(0\)</span> and the ending point is <span class="math notranslate nohighlight">\(1\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ca
</pre></div>
</div>
</div>
</div>
<p>Similarly, <code class="docutils literal notranslate"><span class="pre">1:3</span></code> selects characters number <span class="math notranslate nohighlight">\(1\)</span> and <span class="math notranslate nohighlight">\(2\)</span> because the starting point is <span class="math notranslate nohighlight">\(1\)</span> and the ending point is <span class="math notranslate nohighlight">\(3\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>at
</pre></div>
</div>
</div>
</div>
<p>The ability to select a substring from a string is powerful, as we will see when applied to our example strings <code class="docutils literal notranslate"><span class="pre">'AAPL</span> <span class="pre">Stock'</span></code> and <code class="docutils literal notranslate"><span class="pre">'F</span> <span class="pre">Stock'</span></code>.</p>
</div>
<div class="section" id="searching-strings">
<h3>Searching Strings<a class="headerlink" href="#searching-strings" title="Permalink to this headline">¶</a></h3>
<p>To find a particular character in a string, we can use the <code class="docutils literal notranslate"><span class="pre">.find()</span></code> function.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">'cat'.find('a')</span></code> takes the string <code class="docutils literal notranslate"><span class="pre">'cat'</span></code> and applies the function <code class="docutils literal notranslate"><span class="pre">.find()</span></code> to it.  We specify the character <code class="docutils literal notranslate"><span class="pre">'a'</span></code> inside the function (inside the parentheses) to indicate that we are searching for the character <code class="docutils literal notranslate"><span class="pre">'a'</span></code>.  This command in Python will return the number <span class="math notranslate nohighlight">\(1\)</span> because the character <code class="docutils literal notranslate"><span class="pre">'a'</span></code> first appears in the string <code class="docutils literal notranslate"><span class="pre">'cat'</span></code> at position <span class="math notranslate nohighlight">\(1\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;cat&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">.find()</span></code> will give us only the position of the first instance of a desired character.  Suppose that we want to find the position of the character <code class="docutils literal notranslate"><span class="pre">'o'</span></code> in the string <code class="docutils literal notranslate"><span class="pre">'google'</span></code>.  The command <code class="docutils literal notranslate"><span class="pre">'google.find('o')</span></code> will return the number <span class="math notranslate nohighlight">\(1\)</span>.  It will never give us back the number <span class="math notranslate nohighlight">\(2\)</span>, even though the character <code class="docutils literal notranslate"><span class="pre">'o'</span></code> also appears in that position in the string <code class="docutils literal notranslate"><span class="pre">'google'</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;google&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;o&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;This is a sentence&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;is&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>If a given character is <em>not</em> found in a string, the <code class="docutils literal notranslate"><span class="pre">.find()</span></code> function will return <code class="docutils literal notranslate"><span class="pre">-1</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;google&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-1
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Find the position of the ticker <code class="docutils literal notranslate"><span class="pre">NVDA</span></code> in the following string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
<span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;Analysts expect earnings for NVDA to rise over the next four quarters.&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="string-concatenation">
<h3>String Concatenation<a class="headerlink" href="#string-concatenation" title="Permalink to this headline">¶</a></h3>
<p>The way to combine (also known as <em>concatenating</em>) two or more strings is to use the <code class="docutils literal notranslate"><span class="pre">+</span></code> character.  Just like <code class="docutils literal notranslate"><span class="pre">+</span></code> combines integers and/or floating point numbers, <code class="docutils literal notranslate"><span class="pre">+</span></code> combines strings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">word1</span> <span class="o">=</span> <span class="s1">&#39;Apple&#39;</span>
<span class="n">word2</span> <span class="o">=</span> <span class="s1">&#39;Inc.&#39;</span>
<span class="n">word1</span> <span class="o">+</span> <span class="n">word2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;AppleInc.&#39;
</pre></div>
</div>
</div>
</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">+</span></code> does not join together strings with spaces between them.  There are very reasonable applications in which no spacing should occur between strings, and so Python will not assume that you’d like to have spaces between strings.</p>
<p>In the above example, we can safely say that the combined string would look more reasonable with a space between the two words.  To achive this, simply include a <code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code> string as a middle string in what becomes a concatenation of three strings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">word1</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">word2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Apple Inc.&#39;
</pre></div>
</div>
</div>
</div>
<p>Note that tricky issues arrive if we use <code class="docutils literal notranslate"><span class="pre">+</span></code> in circumstances that include both strings and numbers.  Obviously, one can’t add strings and numbers together in any sort of algebraic interpretation of the word “add”.  Importantly, however, is that Python won’t assume that, in the presence of both strings and numbers, a <code class="docutils literal notranslate"><span class="pre">+</span></code> character should be interpreted as concatenation.  To clarify these last two sentences, let’s attempt two different lines of code.</p>
<p>First, enter a number plus a string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">8</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="mi">5043558</span><span class="n">bd679</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="mi">8</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span>

<span class="ne">TypeError</span>: unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;
</pre></div>
</div>
</div>
</div>
<p>Python prints out an error.  The message, in a nutshell, informs us that we can’t use <code class="docutils literal notranslate"><span class="pre">+</span></code> in the presence of an <code class="docutils literal notranslate"><span class="pre">int</span></code> and a <code class="docutils literal notranslate"><span class="pre">str</span></code> variable type.</p>
<p>Second, try things the other way around.  Enter a string plus a number.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;1&#39;</span> <span class="o">+</span> <span class="mi">8</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">25</span><span class="o">-</span><span class="mi">73173934</span><span class="n">f639</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="s1">&#39;1&#39;</span> <span class="o">+</span> <span class="mi">8</span>

<span class="ne">TypeError</span>: can only concatenate str (not &quot;int&quot;) to str
</pre></div>
</div>
</div>
</div>
<p>Again, Python prints out an error.  This time the message is different.  It warns us that Python can only concatenate <code class="docutils literal notranslate"><span class="pre">str</span></code> variables with other <code class="docutils literal notranslate"><span class="pre">str</span></code> variables (and not <code class="docutils literal notranslate"><span class="pre">int</span></code> variables.</p>
<p>Why do the messages differ?  In the first case, Python sees a number (integer) first.  It then assumes that the <code class="docutils literal notranslate"><span class="pre">+</span></code> character must be addition, and gets confused and raises an error when, after the <code class="docutils literal notranslate"><span class="pre">+</span></code> character, it encounters a string.  In the second case, Python sees a string first.  It then assumes that the <code class="docutils literal notranslate"><span class="pre">+</span></code> character is meant to signify concatenation, and thus becomes confused and raises and error when it sees an integer.</p>
<p>The solution to the problem of combining strings and numbers together is called <em>type conversion</em>, and it will be discussed later in this chapter.</p>
</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<p>Variables are one of the two fundamental components of any programming language.  Now that we know what variables are (they things that store data) and how to work with them, we can introduce the the other fundamental component of programming: functions.</p>
<p>Functions give us the ability to write some code that we reference over and over again without having to retype things.  Ultimately, programming is about making your life easier!  We work hard (say, for one semester of our lives) learning how to give a computer instructions (using Python) and then, for the rest of our lives, everything else is easier and more convenient because we can instruct a computer to do lots of the heavy lifting for us.  <u>In financial terms, we spend a little time now for a bunch of time saved later, and thus the net present value of learning to program is positive.</u></p>
<p>Functions have three parts:</p>
<ol class="simple">
<li><p>Function defintion (name the function and determine what <em>inputs</em> we need, if any)</p></li>
<li><p>Operations (execute some code)</p></li>
<li><p>Return statement (define what want we want to get back from the function)</p></li>
</ol>
<p>As an example, let’s compute the weighted average cost of capital, defined as</p>
<div class="math notranslate nohighlight">
\[
r_{\text{WACC}} = \frac{E}{V}\times r_E + \frac{D}{V}\times r_D\times (1-\tau_C).
\]</div>
<p>That is, the weighted average cost of capital for a firm is the proportion of equity in the firm times the equity cost of capital plus the proportion of debt in the firm times the debt cost of capital.  We adjust the latter for the tax shield of debt using the corporate tax rate <span class="math notranslate nohighlight">\(\tau_C\)</span>.</p>
<p><strong>Part 1: definition</strong></p>
<p>A function defintion begins with the keyword <code class="docutils literal notranslate"><span class="pre">def</span></code> followed by the function name and then a colon.</p>
<p>Functions can use information passed to it via input arguments (inputs are named in the parentheses, which appear before the colon).</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
</pre></div>
</div>
<p>Note that in this function definition, we expect <code class="docutils literal notranslate"><span class="pre">E</span></code> and <code class="docutils literal notranslate"><span class="pre">D</span></code> as inputs.  We do not require <code class="docutils literal notranslate"><span class="pre">V</span></code> to be an input to the function, since <code class="docutils literal notranslate"><span class="pre">V</span></code> is easily calculated as <code class="docutils literal notranslate"><span class="pre">V</span> <span class="pre">=</span> <span class="pre">E</span> <span class="pre">+</span> <span class="pre">D</span></code>.  This calculation is included in part 2.</p>
<p><strong>Part 2: operations</strong></p>
<p>Functions run the code written inside of the function (operations) when the function is <em>called</em>.  A function call occurs when a programmer ‘’uses’’ the function, and we’ll see an example of this shortly.</p>
<p><u>NOTE</u>: indentation keeps track of whether code is ‘’inside’’ a function</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">tC</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Part 3: return value</strong></p>
<p>Functions can be many, many lines of code.</p>
<p>The last line, starting with the keyword <code class="docutils literal notranslate"><span class="pre">return</span></code> specifies what value comes back when you run the function.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">tC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cost_of_capital</span>
</pre></div>
</div>
<p>When a function is created, Python becomes ‘’aware’’ of the function, but nothing else happens at that time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cost_of_capital</span>
</pre></div>
</div>
</div>
</div>
<p>For functions to be used, they need to be <em>called</em>.  For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wacc</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="o">.</span><span class="mi">08</span><span class="p">,</span><span class="o">.</span><span class="mi">04</span><span class="p">,</span><span class="o">.</span><span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.06753846153846155
</pre></div>
</div>
</div>
</div>
<p>tells Python to compute the weighted average cost of capital for a firm with an equity value of <span class="math notranslate nohighlight">\(100\)</span>, a debt value of <span class="math notranslate nohighlight">\(30\)</span>, an equity cost of capital of <span class="math notranslate nohighlight">\(8\%\)</span>, a debt cost of capital of <span class="math notranslate nohighlight">\(4\%\)</span>, and a tax rate of <span class="math notranslate nohighlight">\(35\%\)</span>.  The returned value of <code class="docutils literal notranslate"><span class="pre">0.0675</span></code> tells us that the firm’s WACC is <span class="math notranslate nohighlight">\(6.75\%\)</span>.</p>
<p>In the above example, Python <em>assumes</em> the first number (<span class="math notranslate nohighlight">\(100\)</span>) should be given to the input variable <code class="docutils literal notranslate"><span class="pre">E</span></code>, it <em>assumes</em> that the second number (<span class="math notranslate nohighlight">\(30\)</span>) should be given to the input variable <code class="docutils literal notranslate"><span class="pre">D</span></code>, etc.  This is bad practice!  It’s much better to use the input variable names:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.06753846153846155
</pre></div>
</div>
</div>
</div>
<p>because then the ordering of how you enter the inputs doesn’t matter.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wacc</span><span class="p">(</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">,</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.06753846153846155
</pre></div>
</div>
</div>
</div>
<p>This is useful to keep in mind because, realistically, you won’t remember the default ordering of inputs (the order of input variables in the <code class="docutils literal notranslate"><span class="pre">def</span></code> line of the function definition).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">return</span></code> line is important because variables that live inside a function are stuck inside that function.</p>
<p>E.g. the below will throw an error because <code class="docutils literal notranslate"><span class="pre">cost_of_capital</span></code> is only <em>accessible</em> inside the function <code class="docutils literal notranslate"><span class="pre">wacc</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cost_of_capital</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">967605</span><span class="n">eceae6</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">cost_of_capital</span>

<span class="ne">NameError</span>: name &#39;cost_of_capital&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>In order to get the value <code class="docutils literal notranslate"><span class="pre">cost_of_capital</span></code> back from the function, we specify that this value should be <em>returned</em> from the function.  If desired, we can instruct the function to return multiple items to us.  For instance, the <code class="docutils literal notranslate"><span class="pre">wacc()</span></code> function defined above returns only the cost of capital.  If we want to return the total firm value, <code class="docutils literal notranslate"><span class="pre">V</span></code>, along with the cost of capital, we can easily modify the function to do so.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">more_wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cost_of_capital</span><span class="p">,</span> <span class="n">V</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">more_wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.06753846153846155, 130)
</pre></div>
</div>
</div>
</div>
<p>By default, Python is printing out the returned item(s) from the function.  This happens because, if Python is not told to save the returned item(s) anywhere, Python simply prints it out.  We can instead save the returned item(s) to a variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r_W</span> <span class="o">=</span> <span class="n">wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This will preserve the returned item for later use.  For instance, suppose that we calculate the cost of capital and then estimate the present value of a series of three dividend payments (one today, one in a year from now, and one in two years from now).  For simplicity, let’s assume each divident payment is $5.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="o">+</span> <span class="mi">5</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">r_W</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">r_W</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>14.071028677403966
</pre></div>
</div>
</div>
</div>
<p>If multiple items are returned from a function and we save the returned items to a variable, that variable will be a list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">more_wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(0.06753846153846155, 130)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.06753846153846155
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Use the <code class="docutils literal notranslate"><span class="pre">more_wacc()</span></code> function to calculate WACC under the following parameter values:</p>
<ul class="simple">
<li><p>E=200</p></li>
<li><p>D=80</p></li>
<li><p>rE=.09</p></li>
<li><p>rD=0.8</p></li>
<li><p>tC=.4</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="plan-ahead">
<h3>Plan Ahead<a class="headerlink" href="#plan-ahead" title="Permalink to this headline">¶</a></h3>
<p>Functions have the potential to create immense utility for the end user.  A very well constructed function can save you hours (if not days or weeks) of time down the road.  However, to be useful, the function needs to be planned carefully.  If the function is written well, then you can use it conveniently in the future without worrying about the details.  However, if the function is written poorly, it could end up creating a huge headache for you when you try to use it later.</p>
<p>Keeping to the <code class="docutils literal notranslate"><span class="pre">wacc()</span></code> example, let’s consider some simple improvements to the function.</p>
<p>Imagine that we plan to use this <code class="docutils literal notranslate"><span class="pre">wacc()</span></code> function to value companies, using data on companies that will be obtained in some other piece of code.  Thus, we collect all the requisite components to calculating a weighted average cost of capital, as well as information about the current free cash flow and an expected growth rate to the free cash flow.  For simplicity, assume that free cash flow growth and the risk free rate of capital are constant.  In this scenario, we can apply the Gordon growth formula to value the company.</p>
<div class="math notranslate nohighlight">
\[
V = \frac{FCF}{r_{WACC}-g}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span> <span class="c1"># $2M in FCF, growing at 1%/year</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>34.75935828877005
</pre></div>
</div>
</div>
</div>
<p>A limitation of the <code class="docutils literal notranslate"><span class="pre">wacc()</span></code> function is that it assumes all inputs are sensible.  Suppose an innocent typo places a negative sign in front of the value for <code class="docutils literal notranslate"><span class="pre">rE</span></code>.  In this case, form value can end up a negative number!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=-.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-30.516431924882625
</pre></div>
</div>
</div>
</div>
<p>One can look at this and see that there is a problem; firm value cannot be negative.  A scarier example is one in which the accidental negative shows up in front of the value for <code class="docutils literal notranslate"><span class="pre">rD</span></code>.  This latter case is worse because it’s not as obvious that there is an issue (firm value is still calculated to be positive).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=-.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>43.91891891891892
</pre></div>
</div>
</div>
</div>
<p>These sorts of small problems can create huge issues for you or your company.  In this working example, the typo over-values the firm by:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">value_wrong</span> <span class="o">=</span> <span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=-.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">value_right</span> <span class="o">=</span> <span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">value_wrong</span> <span class="o">/</span> <span class="n">value_right</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.2635135135135136
</pre></div>
</div>
</div>
</div>
<p>Therefore, when we write the <code class="docutils literal notranslate"><span class="pre">wacc()</span></code> function, we should take care to watch out for anticipable errors and deal with them.</p>
<p>One option is to simply print out a warning message if the function detects something fishy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">rE</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rE is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rD</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rD is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tC</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;tC is not positive&#39;</span><span class="p">)</span>
    
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cost_of_capital</span>

<span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=-.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning! rD is not positive
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>43.91891891891892
</pre></div>
</div>
</div>
</div>
<p>This at least generates a warning message, but warnings can only go so far.  There is a very real possibility that someone using this function may not notice the warning message and consequently carry on with their analysis despite having an erroneously calculated firm value.</p>
<p>If you are certain something is absolutely not an acceptable input, stop it!  Do not let the function continue operating on bad data.  The way to do this is with an <strong>Exception</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">rE</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rE is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rD</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rD is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tC</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;tC is not positive&#39;</span><span class="p">)</span>
    
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cost_of_capital</span>

<span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=-.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">Exception</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">27</span><span class="o">-</span><span class="mi">256</span><span class="n">c67bfb8c0</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>     <span class="k">return</span> <span class="n">cost_of_capital</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span> 
<span class="ne">---&gt; </span><span class="mi">14</span> <span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=-.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span>

<span class="nn">&lt;ipython-input-27-256c67bfb8c0&gt;</span> in <span class="ni">better_wacc</span><span class="nt">(E, D, rE, rD, tC)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>         <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Warning! rE is not positive&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="k">if</span> <span class="n">rD</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">6</span>         <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Warning! rD is not positive&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>     <span class="k">if</span> <span class="n">tC</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>         <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Warning! tC is not positive&#39;</span><span class="p">)</span>

<span class="ne">Exception</span>: Warning! rD is not positive
</pre></div>
</div>
</div>
</div>
<p>Exception messages spit out lots of text, so they can be somewhat intimidating to approach at first.  Python will print out a <em>traceback</em> of what code ran that ultimately resulted in an error.  The easiest way to get a quick picture of what happened is to follow the <code class="docutils literal notranslate"><span class="pre">---&gt;</span></code> symbols, reading from top to bottom.  The first such symbol indicates that line 14 was called.  The second such symbol tells us that line 6 was called.  The actual error message is the final line of the printout.  From this brief inspection, we can figure out what went wrong.  Notice that line 6 can only be called if line 5 is true.  Hence, the root of our problem is that line 5 is true, indicating that <code class="docutils literal notranslate"><span class="pre">rD</span></code> is entered as a negative number.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">if</span></code> statements added to <code class="docutils literal notranslate"><span class="pre">better_wacc()</span></code> cause the funcion to “break” (raise an error message and stop the code from continuing) under certain scenarios.  To see that the code completely terminantes when an exception is raised, try the following.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span> <span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=-.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;firm value is now calculated&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">Exception</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">28</span><span class="o">-</span><span class="n">a502cbe6c27d</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="nb">print</span><span class="p">(</span> <span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="n">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">rE</span><span class="o">=.</span><span class="mi">08</span><span class="p">,</span><span class="n">rD</span><span class="o">=-.</span><span class="mi">04</span><span class="p">,</span><span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span> <span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;firm value is now calculated&#39;</span><span class="p">)</span>

<span class="nn">&lt;ipython-input-27-256c67bfb8c0&gt;</span> in <span class="ni">better_wacc</span><span class="nt">(E, D, rE, rD, tC)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>         <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Warning! rE is not positive&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="k">if</span> <span class="n">rD</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="ne">----&gt; </span><span class="mi">6</span>         <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Warning! rD is not positive&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>     <span class="k">if</span> <span class="n">tC</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>         <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Warning! tC is not positive&#39;</span><span class="p">)</span>

<span class="ne">Exception</span>: Warning! rD is not positive
</pre></div>
</div>
</div>
</div>
<p>Note that the second print statement is not executed.  Python halts all operations when an exception occurs.</p>
<p>Do not insert exceptions to your functions unnecessarily.  Only rely on financial principles to make these judgements.  It is obvious, for example, that costs of capital should not be negative.  Moreover, the second Modigliani and Miller proposition tells us that <code class="docutils literal notranslate"><span class="pre">rE</span></code> should always be at least as high as <code class="docutils literal notranslate"><span class="pre">rD</span></code>, so we could raise an exception if <code class="docutils literal notranslate"><span class="pre">rE</span> <span class="pre">&lt;=</span> <span class="pre">rD</span></code>.  However, there is no strict rule, either by regulation or by principles of finance, that debt value cannot exceed equity value.  For some smaller firms, it may very well be that leverage exceeds 50%.  However, if you write the <code class="docutils literal notranslate"><span class="pre">better_wacc()</span></code> function and anticipate that it will only be used on large, S&amp;P 500 companies, it may make sense to check whether <code class="docutils literal notranslate"><span class="pre">E</span> <span class="pre">&gt;</span> <span class="pre">D</span></code>.  In this case, raising an exception would not be appropriate.  However, since we would generally expect that equity value should exceed debt value, it may make sense to print a warning message for the user.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">rE</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rE is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rD</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rD is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tC</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;tC is negative&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rE</span> <span class="o">&lt;=</span> <span class="n">rD</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rE &lt;= rD, M&amp;M prop2 violated&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">D</span> <span class="o">&gt;</span> <span class="n">E</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning, debt value exceeds equity value.  Did you accidentally flip these values?&#39;</span><span class="p">)</span>
    
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cost_of_capital</span>
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Use the <code class="docutils literal notranslate"><span class="pre">better_wacc()</span></code> function to estimate WACC given the following parameter values.</p>
<ul class="simple">
<li><p>E = 10</p></li>
<li><p>D = 100</p></li>
<li><p>rE = .15</p></li>
<li><p>rD = .05</p></li>
<li><p>tC = .35</p></li>
</ul>
<p>By the way, does the gap between <code class="docutils literal notranslate"><span class="pre">rE</span></code> and <code class="docutils literal notranslate"><span class="pre">rD</span></code> make senese to you?  Hint: think about the levels of <code class="docutils literal notranslate"><span class="pre">E</span></code> and <code class="docutils literal notranslate"><span class="pre">D</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="combine-multiple-functions-for-maximal-efficiency">
<h3>Combine Multiple Functions for Maximal Efficiency<a class="headerlink" href="#combine-multiple-functions-for-maximal-efficiency" title="Permalink to this headline">¶</a></h3>
<p>Functions should handle small, specific tasks.  Do not write one large function that does an entirely specialized task that you will rarely need to perform.  Remember, the goal of functions is to create shortcuts for us to instruct Python to perform a repetitive task, rather than re-writing those instructions each time we need a task to be performed.</p>
<p>You will find that one convenient use of functions is to combine them in a manner like what is shown below.  We already have the <code class="docutils literal notranslate"><span class="pre">better_wacc()</span></code> function defined, which calculates a firm’s weighted average cost of capital.  As alluded to above, a firm’s cost of equity is a function of its leverage ratio.  So let’s create a function called <code class="docutils literal notranslate"><span class="pre">cost_of_equity()</span></code> that will determine a firm’s cost of equity capital.  Recall that Modigliani and Miller proposition 2 states:
$<span class="math notranslate nohighlight">\(
r_E = r_A + (r_A-r_D)*(1-t_C)*(D/E)
\)</span><span class="math notranslate nohighlight">\(
where \)</span>r_A$ is the <em>unlevered</em> cost of capital (equal to the cost of equity capital for a firm with no leverage).</p>
<p>Let us then define another function, <code class="docutils literal notranslate"><span class="pre">firm_value()</span></code> that calculates the value of a firm.  Inside the <code class="docutils literal notranslate"><span class="pre">firm_value()</span></code> function, we will call both the <code class="docutils literal notranslate"><span class="pre">better_wacc()</span></code> function and the <code class="docutils literal notranslate"><span class="pre">cost_of_equity()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cost_of_equity</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rA</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">rA</span> <span class="o">+</span> <span class="p">(</span><span class="n">rA</span><span class="o">-</span><span class="n">rD</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">E</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">firm_value</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rA</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">,</span> <span class="n">FCF</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
    
    <span class="n">rE</span> <span class="o">=</span> <span class="n">cost_of_equity</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="n">D</span><span class="p">,</span> <span class="n">rA</span><span class="o">=</span><span class="n">rA</span><span class="p">,</span> <span class="n">rD</span><span class="o">=</span><span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="o">=</span><span class="n">tC</span><span class="p">)</span>
    <span class="n">rW</span> <span class="o">=</span> <span class="n">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">rW</span> <span class="o">&lt;</span> <span class="n">g</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rW must be greater than g, but g=&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="s1">&#39;and rW=&#39;</span><span class="p">,</span> <span class="n">rW</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">FCF</span> <span class="o">/</span> <span class="p">(</span><span class="n">rW</span> <span class="o">-</span> <span class="n">g</span><span class="p">)</span>

<span class="n">firm_value</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">rA</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span> <span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">,</span> <span class="n">FCF</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">g</span><span class="o">=.</span><span class="mi">01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>55.61497326203209
</pre></div>
</div>
</div>
</div>
<p>What happens if the firm had a different debt level?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">firm_value</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">rA</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span> <span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">,</span> <span class="n">FCF</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">g</span><span class="o">=.</span><span class="mi">01</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>57.77777777777777
</pre></div>
</div>
</div>
</div>
<p>Debt is valuable because of the tax shield.  You can see that this is the cause for the change in firm value by setting <code class="docutils literal notranslate"><span class="pre">tC</span></code> to zero and re-computing both values above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span> <span class="n">firm_value</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">rA</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span> <span class="n">tC</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">FCF</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">g</span><span class="o">=.</span><span class="mi">01</span><span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">firm_value</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">rA</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span> <span class="n">tC</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">FCF</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">g</span><span class="o">=.</span><span class="mi">01</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>50.0
50.0
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Estimate the cost of equity for a firm under two different scenarios.</p>
<ol class="simple">
<li><p>E=90, D=10, rA=.05, rD=.04, tC=.2</p></li>
<li><p>E=10, D=90, rA=.05, rD=.04, tC=.2</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="loops-and-lists">
<h2>Loops and Lists<a class="headerlink" href="#loops-and-lists" title="Permalink to this headline">¶</a></h2>
<div class="section" id="for-loops-and-lifetime-savings">
<h3><code class="docutils literal notranslate"><span class="pre">for</span></code> Loops and Lifetime Savings<a class="headerlink" href="#for-loops-and-lifetime-savings" title="Permalink to this headline">¶</a></h3>
<p>Because Python is quick and easy (once you have a handle of it), it serves as a useful tool for playing out ideas.  For example, suppose that we want to visualize a savings decision:</p>
<blockquote>
<div><p>Once you begin contributing to a savings account, assume that you put away <span class="math notranslate nohighlight">\(x\)</span> dollars per year and expect an annual return of <span class="math notranslate nohighlight">\(r\)</span>.  How much money will you have saved in <span class="math notranslate nohighlight">\(55\)</span> years?</p>
</div></blockquote>
<p>Begin by defining the <em>variables</em> you need</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">5000</span>
<span class="n">r</span> <span class="o">=</span> <span class="mf">0.06</span>
</pre></div>
</div>
</div>
</div>
<p>Now, <em>compound</em> the returns you get over the next <span class="math notranslate nohighlight">\(55\)</span> years.  Imagine that today is year 0.  At the end of year 0, you’ll have saved <span class="math notranslate nohighlight">\(x \times (1+r)\)</span>.  Then, after another, you’re year zero savings grow by another <span class="math notranslate nohighlight">\((1+r)\)</span>, and your year one savings (since you put away <span class="math notranslate nohighlight">\(x\)</span> more each year), also grows by <span class="math notranslate nohighlight">\((1+r)\)</span>.  The following table helps visualize the idea:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Time</p></th>
<th class="head"><p>Value of Money Saved at Year 0</p></th>
<th class="head"><p>Value of Money Saved at Year 1</p></th>
<th class="head"><p>Value of Money Saved at Year 2</p></th>
<th class="head"><p>Value of Money Saved at Year 3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p><span class="math notranslate nohighlight">\(x\)</span></p></td>
<td><p>.</p></td>
<td><p>.</p></td>
<td><p>.</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p><span class="math notranslate nohighlight">\(x(1+r)\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(x\)</span></p></td>
<td><p>.</p></td>
<td><p>.</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p><span class="math notranslate nohighlight">\(x(1+r)^2\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(x(1+r)\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(x\)</span></p></td>
<td><p>.</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p><span class="math notranslate nohighlight">\(x(1+r)^3\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(x(1+r)^2\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(x(1+r)\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(x\)</span></p></td>
</tr>
</tbody>
</table>
<p>Add up the values across each column to get the total savings at the <em>beginning</em> of a given year.  This sum is reported in the following table:</p>
<table width="100%">
    <tr>
        <th width="20%">
            Time
        </th>
        <th width="40%">
            Total Savings (beginning of year)
        </th>
        <th width="40%">
            Total Savings (algebraically re-arranged)
        </th>
    </tr>
    <tr>
        <td>
            $0$
        </td>
        <td>
            $x$
        </td>
        <td>
            $x$
        </td>
    </tr>
    <tr>
        <td>
            $1$
        </td>
        <td>
            <span style="color:blue">$x(1+r)+x$</span>
        </td>
        <td>
            $x(1+r)+x$
        </td>
    </tr>
    <tr>
        <td>
            $2$
        </td>
        <td>
            <span style="color:red">$x(1+r)^2+x(1+r)+x$</span>
        </td>
        <td>
            $\Big[$<span style="color:blue">$x(1+r)+x$</span>$\Big](1+r)+x$
        </td>
    </tr>
    <tr>
        <td>
            $3$
        </td>
        <td>
            $x(1+r)^3+x(1+r)^2+x(1+r)+x$
        </td>
        <td>
            $\Big[$<span style="color:red">$x(1+r)^2+x(1+r)+x$</span>$\Big](1+r)+x$
        </td>
    </tr>
</table>
<p>Comparing values across columns two and three of the above table, a convenient pattern emerges.  For instance, the value in year 2, column three equals <span class="math notranslate nohighlight">\(x\)</span> plus <span class="math notranslate nohighlight">\((1+r)\)</span> times the value in year 1, column two.</p>
<p>If we want to calculate the value of your savings acount at the beginning of year <span class="math notranslate nohighlight">\(55\)</span>, we need to tell Python to compound returns for <span class="math notranslate nohighlight">\(55\)</span> years.  The really awful way to do this is to tell Python to calculate <span class="math notranslate nohighlight">\(x(1+r)^{55}+x(1+r)^{54}+x(1+r)^{53}+...+x(1+r)^2+x(1+r)+x\)</span>.  The programmer’s way to do this is to use the pattern we pointed out in the above table, and make use of a <em>for loop</em> that operates over a range of years.</p>
<p>If we wanted to loop over years <span class="math notranslate nohighlight">\(0\)</span> through <span class="math notranslate nohighlight">\(3\)</span>, we could tell Python to use a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop to iterate over a list of the numbers <span class="math notranslate nohighlight">\(0\)</span> through <span class="math notranslate nohighlight">\(3\)</span>.  A <code class="docutils literal notranslate"><span class="pre">for</span></code> loop has four components to it:</p>
<ul class="simple">
<li><p>the word <code class="docutils literal notranslate"><span class="pre">for</span></code> : tells Python to execute a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop</p></li>
<li><p>a variable name : this serves as a <em>loop index</em>.  You’ll see in a moment what this index does.  A common name used here is the letter <code class="docutils literal notranslate"><span class="pre">i</span></code></p></li>
<li><p>the word <code class="docutils literal notranslate"><span class="pre">in</span></code> : tells Python that the loop index will be contained within ‘’something’’.</p></li>
<li><p>a list : this is the ‘’something’’ that we loop over.  Every item in the list gets used once.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
2
3
</pre></div>
</div>
</div>
</div>
<p>What a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop does is tells Python to loop over the list specified (in this case, the list of numbers <span class="math notranslate nohighlight">\(0\)</span> through <span class="math notranslate nohighlight">\(4\)</span>).  For each item in that list, Python sets the loop index variable (in this case, we defined the index variable to be named <code class="docutils literal notranslate"><span class="pre">i</span></code>) equal to that value of the list and then executes every step within the for loop (all of the indented lines of code underneath the line <code class="docutils literal notranslate"><span class="pre">for</span></code>.  Here, our for loop only specifies one action: print out the value of the loop index.</p>
<p>In our motivating example, we want Python to work over a long range of years.  In this case, years <span class="math notranslate nohighlight">\(0\)</span> through <span class="math notranslate nohighlight">\(55\)</span>.
This would be tedious to type out explicitly into <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">...,</span> <span class="pre">54,</span> <span class="pre">55]</span></code>.  Python has a trick for this, but there’s one caveat to keep in mind.  As children, we learn to start counting with the number <span class="math notranslate nohighlight">\(1\)</span>.  Python, like most programming languages, starts counting with the number <span class="math notranslate nohighlight">\(0\)</span>.  Thus, the built-in function <code class="docutils literal notranslate"><span class="pre">range()</span></code> uses this starts-at-zero convention.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
</pre></div>
</div>
</div>
</div>
<p>As demonstrated above, <code class="docutils literal notranslate"><span class="pre">range(5)</span></code> tells Python that the loop should iterate over numbers <span class="math notranslate nohighlight">\(0\)</span> through <span class="math notranslate nohighlight">\(4\)</span>.  Generally, we use <code class="docutils literal notranslate"><span class="pre">range(n)</span></code> to obtain numbers <span class="math notranslate nohighlight">\(0\)</span> through <span class="math notranslate nohighlight">\(n-1\)</span> (<em>not</em> <span class="math notranslate nohighlight">\(0\)</span> through <span class="math notranslate nohighlight">\(n\)</span>).  Thus, we get <span class="math notranslate nohighlight">\(n\)</span> numbers out of <code class="docutils literal notranslate"><span class="pre">range(n)</span></code>.  If we want to iterate up through year <span class="math notranslate nohighlight">\(55\)</span>, we would therefore use the statement <code class="docutils literal notranslate"><span class="pre">range(56)</span></code>.</p>
<p>To calculate the value of your savings after <span class="math notranslate nohighlight">\(55\)</span> years, we simply have to type out:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">savings</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># initially, 0 dollars in savings account</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">56</span><span class="p">):</span>
    <span class="n">savings</span> <span class="o">=</span> <span class="n">savings</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span> <span class="c1"># each year, pre-existings savings grows by (1+r) and an additional x is added</span>
<span class="nb">print</span><span class="p">(</span><span class="n">savings</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2094111.7408149564
</pre></div>
</div>
</div>
</div>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Edit the following code so that the value for <code class="docutils literal notranslate"><span class="pre">my_savings</span></code> is printed out at years <code class="docutils literal notranslate"><span class="pre">10</span></code>, <code class="docutils literal notranslate"><span class="pre">20</span></code>, and <code class="docutils literal notranslate"><span class="pre">30</span></code>.  Hint: check for whether <code class="docutils literal notranslate"><span class="pre">i</span></code> is <code class="docutils literal notranslate"><span class="pre">in</span> <span class="pre">[10,</span> <span class="pre">20,</span> <span class="pre">30]</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
<span class="n">my_savings</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">35</span><span class="p">):</span>
    <span class="n">my_savings</span> <span class="o">=</span> <span class="n">my_savings</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span>
    <span class="c1"># edit the code here!</span>
    
<span class="nb">print</span><span class="p">(</span><span class="n">savings</span><span class="p">)</span> <span class="c1"># this will print the savings after 35 years, we want to see savings at year 10, 20, 30 as well</span>
</pre></div>
</div>
</div>
</div>
<p>For loops allow us to quickly visualize an idea.  For example, let’s return to the valuation problem from earlier in the chapter.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">rE</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rE is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rD</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rD is not positive&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tC</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;tC is not positive&#39;</span><span class="p">)</span>
    
    <span class="n">V</span> <span class="o">=</span> <span class="n">E</span> <span class="o">+</span> <span class="n">D</span>
    <span class="n">cost_of_capital</span> <span class="o">=</span> <span class="n">E</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rE</span> <span class="o">+</span> <span class="n">D</span> <span class="o">/</span> <span class="n">V</span> <span class="o">*</span> <span class="n">rD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cost_of_capital</span>

<span class="k">def</span> <span class="nf">cost_of_equity</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rA</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">rA</span> <span class="o">+</span> <span class="p">(</span><span class="n">rA</span><span class="o">-</span><span class="n">rD</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tC</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">E</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">firm_value</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rA</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">,</span> <span class="n">FCF</span><span class="p">,</span> <span class="n">g</span><span class="p">):</span>
    
    <span class="n">rE</span> <span class="o">=</span> <span class="n">cost_of_equity</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="n">D</span><span class="p">,</span> <span class="n">rA</span><span class="o">=</span><span class="n">rA</span><span class="p">,</span> <span class="n">rD</span><span class="o">=</span><span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="o">=</span><span class="n">tC</span><span class="p">)</span>
    <span class="n">rW</span> <span class="o">=</span> <span class="n">better_wacc</span><span class="p">(</span><span class="n">E</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">rE</span><span class="p">,</span> <span class="n">rD</span><span class="p">,</span> <span class="n">tC</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">rW</span> <span class="o">&lt;</span> <span class="n">g</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;rW must be greater than g, but g=&#39;</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="s1">&#39;and rW=&#39;</span><span class="p">,</span> <span class="n">rW</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">FCF</span> <span class="o">/</span> <span class="p">(</span><span class="n">rW</span> <span class="o">-</span> <span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Earlier, we saw that the value of the firm changed as its leverage ratio changed.  A more complete, easier to see representation of this idea is to loop over many different debt-equity mixes and check what happens to firm value.</p>
<p>Before jumping on the firm value example, let’s clarify the usages of <code class="docutils literal notranslate"><span class="pre">range()</span></code>.  There are three possible ways to call the <code class="docutils literal notranslate"><span class="pre">range()</span></code> function:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">range(n)</span></code>: gives numbers <span class="math notranslate nohighlight">\(0\)</span> to <span class="math notranslate nohighlight">\(n\)</span>, i.e. [0, 1, …, n]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range(k,n)</span></code>: gives numbers <span class="math notranslate nohighlight">\(k\)</span> to <span class="math notranslate nohighlight">\(n\)</span>, i.e. [k, k+1, …, n]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range(k,n,b)</span></code>: gives numbers <span class="math notranslate nohighlight">\(k\)</span> to <span class="math notranslate nohighlight">\(n\)</span>, incrementing by <span class="math notranslate nohighlight">\(b\)</span></p></li>
</ol>
<p>It’s perhaps easiest to understand the use cases with a few examples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
1
2
3
4
5
6
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
3
4
5
6
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
5
</pre></div>
</div>
</div>
</div>
<p>In the earlier example estimating firm value, the level of debt and equity of the firm added up to be 100.  Let’s stick to the example numbers used earlier, and consider different debt-equity mixes that add to 100.  We could iterate over possible debt levels of 0 to 90 with either a call to <code class="docutils literal notranslate"><span class="pre">range(91)</span></code> or <code class="docutils literal notranslate"><span class="pre">range(0,91)</span></code>, but that would call the <code class="docutils literal notranslate"><span class="pre">firm_value()</span></code> function 91 times!  That many calculated firm values would be hard to read.  To make things easier on ourselves, let’s try debt values of 0, 10, 20, …, 90.  We can do this with the three-input version of the <code class="docutils literal notranslate"><span class="pre">range()</span></code> function call.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">D</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">firm_value</span><span class="p">(</span><span class="n">E</span><span class="o">=</span><span class="mi">100</span><span class="o">-</span><span class="n">D</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="n">D</span><span class="p">,</span> <span class="n">rA</span><span class="o">=.</span><span class="mi">05</span><span class="p">,</span> <span class="n">rD</span><span class="o">=.</span><span class="mi">04</span><span class="p">,</span> <span class="n">tC</span><span class="o">=.</span><span class="mi">35</span><span class="p">,</span> <span class="n">FCF</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">g</span><span class="o">=.</span><span class="mi">01</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0 50.0
10 52.287581699346404
20 54.7945205479452
30 57.55395683453237
40 60.6060606060606
50 64.0
60 67.79661016949152
70 72.07207207207207
80 76.92307692307692
90 82.4742268041237
</pre></div>
</div>
</div>
</div>
<p>Think carefully about why <code class="docutils literal notranslate"><span class="pre">range(0,100,10)</span></code> gives values [0, 10, 20, …, 80, 90] and not values [0, 10, 20, …, 90, 100].</p>
</div>
<div class="section" id="lists">
<h3>Lists<a class="headerlink" href="#lists" title="Permalink to this headline">¶</a></h3>
<p>A Python <code class="docutils literal notranslate"><span class="pre">list</span></code> holds a list of items in an ordered way.  For example, a list of favorite things might include</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">favorite_things1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;raindrops on roses&#39;</span><span class="p">,</span> <span class="s1">&#39;whiskers on kittens&#39;</span><span class="p">,</span> <span class="s1">&#39;bright copper kettles&#39;</span><span class="p">,</span> <span class="s1">&#39;warm woolen mittens&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>for Julie Andrews.</p>
<p>When we say lists are ordered, it’s because we can enter <code class="docutils literal notranslate"><span class="pre">favorite_things1[0]</span></code> and get back <code class="docutils literal notranslate"><span class="pre">'raindrops</span> <span class="pre">on</span> <span class="pre">roses'</span></code> as Julie Andrew’s first favorite thing.  Remember, Python starts counting at zero!</p>
<p>Lists can hold whatever you want.  It could be strings (as shown above), numbers, or even other variables.  Consider a list of daily stock returns</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">daily_stock_returns</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">]</span>
</pre></div>
</div>
<p>Let’s input this into the following code block for use throughout this section.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">daily_stock_returns</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>If we want the stock return for day 0, we simply type</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">daily_stock_returns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.03
</pre></div>
</div>
</div>
</div>
<p>and Python gives us back the value.  Now suppose that the five daily stock returns corresponded to a week of stock return data.  How do we convert this data into a weekly return?</p>
<div class="math notranslate nohighlight">
\[
\text{weekly return} = (-1) + \Pi_{t=1}^5 (1 + \text{daily return}_t)
\]</div>
<p>In case the <span class="math notranslate nohighlight">\(\Pi\)</span> symbol is unfamiliar, it means multiply.  Just like <span class="math notranslate nohighlight">\(\sum_{i=1}^3 x_i\)</span> means <span class="math notranslate nohighlight">\(x_1 + x_2 + x_3\)</span>, the statement <span class="math notranslate nohighlight">\(\Pi_{i=1}^3 x_i\)</span> means <span class="math notranslate nohighlight">\(x_1 * x_2 * x_3\)</span>.</p>
<p>The simple way to do this is</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">daily_stock_returns</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">daily_stock_returns</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">daily_stock_returns</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">daily_stock_returns</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">daily_stock_returns</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.019392050600000044
</pre></div>
</div>
</div>
</div>
<p>That looks annoying to type out, doesn’t it?  Now imagine calculating an annual return from 252 days of daily trading data.  This would be prohbitively tedious.</p>
<p>Luckily, we’re learning how to program, which means we can take advantage of useful things like <code class="docutils literal notranslate"><span class="pre">for</span></code> loops to make our lives easier.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">weekly_return</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">weekly_return</span> <span class="o">=</span> <span class="n">weekly_return</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">daily_stock_returns</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="n">weekly_return</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">weekly_return</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.019392050600000044
</pre></div>
</div>
</div>
</div>
<p>Stop to think for a moment about why we set <code class="docutils literal notranslate"><span class="pre">weekly_return</span></code> equal to <span class="math notranslate nohighlight">\(1\)</span> before beginning the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop.</p>
<p>Most, if not all, variable types in Python have special functions that exist for those variable types.  For example, string variables contain text, and so these variables have <code class="docutils literal notranslate"><span class="pre">.upper()</span></code> and <code class="docutils literal notranslate"><span class="pre">.lower()</span></code> functions that can be used with them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_str</span> <span class="o">=</span> <span class="s1">&#39;Finance Data Science&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_str</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>FINANCE DATA SCIENCE
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">my_str</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>finance data science
</pre></div>
</div>
</div>
</div>
<p>For list variables, two important functions are <code class="docutils literal notranslate"><span class="pre">.append()</span></code> and <code class="docutils literal notranslate"><span class="pre">.pop()</span></code>.  These functions add and remove data from the list, respectively.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4]
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.append()</span></code> function takes as an argument the data that you want to append to a list, and then adds that data to the end of an existing list.  Note that, as with <code class="docutils literal notranslate"><span class="pre">.upper()</span></code> or <code class="docutils literal notranslate"><span class="pre">.lower()</span></code> for strings, here the function starts with a <code class="docutils literal notranslate"><span class="pre">.</span></code> and follows the variable name.  This is different than using a function like <code class="docutils literal notranslate"><span class="pre">print()</span></code> or, from earlier in this chapter, <code class="docutils literal notranslate"><span class="pre">wacc()</span></code>.  The difference exists because <code class="docutils literal notranslate"><span class="pre">.append()</span></code> is a function defined specifically for the list variable type.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, 2]
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">.pop()</span></code> removes data from a list, and you don’t necessarily need to say <em>what</em> data gets deleted.  By default, if you do not supply an argument to <code class="docutils literal notranslate"><span class="pre">.pop()</span></code> then Python will delete the last item from the list.  To specify an element to delete, select it based on that element’s position in the list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[2, 3]
</pre></div>
</div>
</div>
</div>
<p>In Python, <code class="docutils literal notranslate"><span class="pre">for</span></code> loops operate on lists of information.  For example, the command <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">range(5)</span></code> tells Python to operate on the list of numbers from <span class="math notranslate nohighlight">\(0\)</span> to <span class="math notranslate nohighlight">\(4\)</span>.  Likewise, <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">['cat',</span> <span class="pre">'dog',</span> <span class="pre">'bird']</span></code> tells Python to operate on the list of strings ‘cat’, ‘dog’, and ‘bird’.  Notice, therfore, that the list of items we loop over does not have to use numbers!  Let’s see what happens when we loop over these strings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;cat&#39;</span><span class="p">,</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;bird&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>cat
dog
bird
</pre></div>
</div>
</div>
</div>
<p>The value for <code class="docutils literal notranslate"><span class="pre">i</span></code> in the above <code class="docutils literal notranslate"><span class="pre">for</span></code> loop is set to be each of these strings in turn.</p>
<p>For each element in the given list, Python applies certain commands to that item.  These commands are the lines of code that appear within a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop (the indented section of code that follows the <code class="docutils literal notranslate"><span class="pre">for</span></code> statement.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop operation is only a single line long, there is a special shortcut that we can use.  This shortcut is called <strong>list comprehension</strong>.  Consider the task of subtracting the risk free rate from the list of daily returns in order to compute an excess return.  For simplicity, assume the risk free rate is constant and equal to <span class="math notranslate nohighlight">\(0.01\)</span>.  One way of achieving this is with the following <code class="docutils literal notranslate"><span class="pre">for</span></code> loop.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">excess_returns</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">excess_returns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">daily_stock_returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.01</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">excess_returns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.019999999999999997, 0.0, -0.03, 0.0, -0.02]
</pre></div>
</div>
</div>
</div>
<p>Before showing off list comprehension, let’s stop and think about one potential issue with the above code.  In the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop above, we explicity refer to the number <span class="math notranslate nohighlight">\(5\)</span> when defining the range of the loop.  That’s a bad idea.  What if we add more stock return data to our list, and then re-run the above code?  In that scenario, the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop won’t execute as intended, since it will still only calculate excess returns for the first five days.</p>
<p>A better way to loop over a list is to use the <code class="docutils literal notranslate"><span class="pre">len()</span></code> function (‘len’ stands for ‘length’, but Python is nice and only expects us to type out three characters instead of six).  The function <code class="docutils literal notranslate"><span class="pre">len()</span></code> can calculate the length of a list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">daily_stock_returns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<p>Hence, we improve upon our <code class="docutils literal notranslate"><span class="pre">for</span></code> loop above by removing the explicit reference to the number <span class="math notranslate nohighlight">\(5\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">excess_returns</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="n">daily_stock_returns</span><span class="p">)</span> <span class="p">):</span>
    <span class="n">excess_returns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">daily_stock_returns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.01</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">excess_returns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.019999999999999997, 0.0, -0.03, 0.0, -0.02]
</pre></div>
</div>
</div>
</div>
<p>Now, the above code will work as expected, regardless of how many items are in the <code class="docutils literal notranslate"><span class="pre">daily_stock_returns</span></code> list.</p>
<p>An alternative to using <code class="docutils literal notranslate"><span class="pre">len()</span></code> and referencing list elements by their index position (i.e. doing <code class="docutils literal notranslate"><span class="pre">daily_stock_returns[i]</span></code>) is to simply tell Python that we want to loop over <code class="docutils literal notranslate"><span class="pre">daily_stock_returns</span></code>.  Thus, rather than telling Python we want to loop over <code class="docutils literal notranslate"><span class="pre">range(5)</span></code> or over <code class="docutils literal notranslate"><span class="pre">range(</span> <span class="pre">len(daily_stock_returns)</span> <span class="pre">)</span></code>, we can simply tell Python to loop over <code class="docutils literal notranslate"><span class="pre">daily_stock_returns</span></code> directly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">daily_stock_returns</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.03
0.01
-0.02
0.01
-0.01
</pre></div>
</div>
</div>
</div>
<p>Thus, an alternative improvement to the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop is to do the following.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">excess_returns</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">daily_stock_returns</span><span class="p">:</span>
    <span class="n">excess_returns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">i</span> <span class="o">-</span> <span class="o">.</span><span class="mi">01</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">excess_returns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.019999999999999997, 0.0, -0.03, 0.0, -0.02]
</pre></div>
</div>
</div>
</div>
<p>If you don’t need to use the list index position inside the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop (as is the case here), it’s better to loop over the list directly, rather than a list of numbers coresponding to the index positions.  The reason is that this form of the <code class="docutils literal notranslate"><span class="pre">for</span></code> loop is the cleanest.  It requires the least amount of typing, and it is the easiest to read.</p>
<p>Now that we’ve seen that we can loop over a list directly (rather than looping over index positions for the list), we can explain list comprehension.  List comprehension takes a simple <code class="docutils literal notranslate"><span class="pre">for</span></code> loop (with one line of code inside the loop) and converts the loop into a neater, shorter piece of code.  Consider the following example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 2]
</pre></div>
</div>
</div>
</div>
<p>The statment is wrapped up in square brackets, indicating a <code class="docutils literal notranslate"><span class="pre">list</span></code> variable.  Within these square brackets, we tell Python to add to this list the value <code class="docutils literal notranslate"><span class="pre">i</span></code>, where we define <code class="docutils literal notranslate"><span class="pre">i</span></code> as any element in <code class="docutils literal notranslate"><span class="pre">range(3)</span></code>.</p>
<p>Likewise, if we allow <code class="docutils literal notranslate"><span class="pre">i</span></code> to be any element in <code class="docutils literal notranslate"><span class="pre">daily_stock_returns</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">daily_stock_returns</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.03, 0.01, -0.02, 0.01, -0.01]
</pre></div>
</div>
</div>
</div>
<p>Rather than store just the value <code class="docutils literal notranslate"><span class="pre">i</span></code>, we could store some function of it.  So, returning to the earlier example using <code class="docutils literal notranslate"><span class="pre">range(3)</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0, 1, 4]
</pre></div>
</div>
</div>
</div>
<p>the square of each value for <code class="docutils literal notranslate"><span class="pre">i</span></code> is included in a list.</p>
<p>In the case of daily stock returns, we can substract the risk free rate to get the excess return.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="o">.</span><span class="mi">01</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">daily_stock_returns</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.019999999999999997, 0.0, -0.03, 0.0, -0.02]
</pre></div>
</div>
</div>
</div>
<p>Hence, the easiest way to compute excess returns is with the simple, one-line statement:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">excess_returns</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="o">.</span><span class="mi">01</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">daily_stock_returns</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">excess_returns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.019999999999999997, 0.0, -0.03, 0.0, -0.02]
</pre></div>
</div>
</div>
</div>
<p>Because list comprehension is just a shortcut to writting out a simple <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, a person could use Python perfectly fine without knowing how to use list comprehension.  However, it’s a popular shortcut, so we highlight it here because it will be used throught this text.</p>
<p><span style="color:red"><strong>Concept check</strong>:</span>  Using list comprehension, iterate over <code class="docutils literal notranslate"><span class="pre">range(2,11,2)</span></code> and obtain the list of values <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5]</span></code> by dividing each item in the range by <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># complete concept check here</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="for-loops-and-delayed-savings">
<h3><code class="docutils literal notranslate"><span class="pre">for</span></code> Loops and Delayed Savings<a class="headerlink" href="#for-loops-and-delayed-savings" title="Permalink to this headline">¶</a></h3>
<p>Consider a slightly modified version of the lifetime savings problem provided above.</p>
<blockquote>
<div><p>Once you begin contributing to a savings account, assume that you put away <span class="math notranslate nohighlight">\(x\)</span> dollars per year and expect an annual return of <span class="math notranslate nohighlight">\(r\)</span>.  How valuable is it to start saving now as opposed to <span class="math notranslate nohighlight">\(10\)</span> years from now?</p>
</div></blockquote>
<p>Again, begin by defining some values for <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(r\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">5000</span>
<span class="n">r</span> <span class="o">=</span> <span class="mf">0.06</span>
</pre></div>
</div>
</div>
</div>
<p>Next, define two list variables.  These will store the value of savings accounts over time.  In the previous example, we updated the value for the savings account each year.  Here, we record the value of the account at each point in time.  This is useful because we can then plot the data and explore this delayed savings problem more carefully.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">save_now</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>    <span class="c1"># value of saving account when savings starts immediately</span>
<span class="n">save_later</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># value of saving account when savings starts 10 years from now</span>
</pre></div>
</div>
</div>
</div>
<p>These list variables store one value each (the value <span class="math notranslate nohighlight">\(x\)</span> and the value <span class="math notranslate nohighlight">\(0\)</span>), which corresponds to the value of the savings account at the beginning of year <span class="math notranslate nohighlight">\(0\)</span>.  Under the “save-now” plan, <span class="math notranslate nohighlight">\(x\)</span> is put away immediately.  Under the “save-later” plan, <span class="math notranslate nohighlight">\(x\)</span> is not put away until year 10.</p>
<p>Now, what we want to do is think about what happens each year.  In the first scenario (begin saving immediately), the savings account grows by <code class="docutils literal notranslate"><span class="pre">(1+r)</span></code> each year, plus an additional <code class="docutils literal notranslate"><span class="pre">x</span></code> that gets added in.  In the second scenario, the savings account only begins growing after year 10, and contributions only begin in year 10.  Before that, nothing happens.</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">else</span></code> logic, a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, and the <code class="docutils literal notranslate"><span class="pre">.append()</span></code> function for lists, we can evaluate these two savings plans.</p>
<p>We’ll begin with the “save-now” savings plan, since this is similar to the problem from the beginning of the chapter.  A difference implemented here is that we call the <code class="docutils literal notranslate"><span class="pre">.append()</span></code> function to add values to the <code class="docutils literal notranslate"><span class="pre">save_now</span></code> list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">56</span><span class="p">):</span> <span class="c1"># loop over i from 1 to 55</span>
    <span class="n">account_value_last_year</span> <span class="o">=</span> <span class="n">save_now</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># e.g. for i = 1 (year 1), loop up account value at i = 0 (year 0)</span>
    <span class="n">account_value_next_year</span> <span class="o">=</span> <span class="n">account_value_last_year</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span>
    <span class="n">save_now</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">account_value_next_year</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>At the beginning of the chapter, we defined a variable <code class="docutils literal notranslate"><span class="pre">savings</span></code>, and updated that variable’s value each loop iteration.  Here, the list variable <code class="docutils literal notranslate"><span class="pre">save_now</span></code> keeps track of <em>each</em> of the savings account values (that is, the value of the account at year 0, at year 1, …, at year 55).  This is useful for plotting a figure, which we’ll do at the end of the chapter.</p>
<p>Next, we modify the above <code class="docutils literal notranslate"><span class="pre">for</span></code> loop to work on the “save-later” plan.  The important distinction here is that, for the first ten years (list index values <span class="math notranslate nohighlight">\(0-9\)</span>, since Python starts counting at <span class="math notranslate nohighlight">\(0\)</span>), no money is put in to the savings account.  Thus, we set the first ten values of the <code class="docutils literal notranslate"><span class="pre">save_later</span></code> list equal to <span class="math notranslate nohighlight">\(0\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">56</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">:</span>
        <span class="n">save_later</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">save_later</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="n">x</span> <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">save_later</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Plotting will be covered in greater detail in a later chapter, so don’t worry about understanding the meaning of the following code block.  The important takeaway is what’s presented in the figure it creates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">56</span><span class="p">),</span> <span class="n">save_now</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Now&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">56</span><span class="p">),</span> <span class="n">save_later</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Later&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/ch0_223_0.png" src="../_images/ch0_223_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="robo-advising">
<h2>Robo-Advising<a class="headerlink" href="#robo-advising" title="Permalink to this headline">¶</a></h2>
<p>As a capstone to chapter 0, let us build a function that serves as a robo-adivsor for a user’s investment portfolio.</p>
<p>There are two new ingredients to add to make a simplified robo-advisor work: <em>type-conversion</em> and <em>input</em>.</p>
<p>We won’t build a complete robo-advisor just yet, but we can make some progress towards building one using the material from this chapter.</p>
<div class="section" id="type-conversions">
<h3>Type Conversions<a class="headerlink" href="#type-conversions" title="Permalink to this headline">¶</a></h3>
<p>Two basic data types within Python are integers and strings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_int</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">my_str</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>The <em>type</em> of a variable can be checked with the <code class="docutils literal notranslate"><span class="pre">type()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span> <span class="nb">type</span><span class="p">(</span><span class="n">my_int</span><span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="nb">type</span><span class="p">(</span><span class="n">my_str</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;int&#39;&gt;
&lt;class &#39;str&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>Variable typing can be important to keep track of.  Note that <span class="math notranslate nohighlight">\(1\)</span> and <code class="docutils literal notranslate"><span class="pre">'1'</span></code> do not count as the same thing in Python.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;1&#39;</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
<p>This matters in the event that you have a <em>string</em> number that you want to use as an integer (or floating point) number.  Suppose you need to add the number 8 to your string number.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="mi">8</span><span class="o">+</span><span class="s1">&#39;1&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">17</span><span class="o">-</span><span class="n">bc89c6d67d5b</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="mi">8</span><span class="o">+</span><span class="s1">&#39;1&#39;</span>

<span class="ne">TypeError</span>: unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;
</pre></div>
</div>
</div>
</div>
<p>Strings containing integers can be converted into integers with the <code class="docutils literal notranslate"><span class="pre">int()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">int</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">8</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>9
</pre></div>
</div>
</div>
</div>
<p>Likewise strings containing decimal numbers can be converted into floating point numbers with the <code class="docutils literal notranslate"><span class="pre">float()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;1.23&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">8</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>9.23
</pre></div>
</div>
</div>
</div>
<p>Moreover, integers or floating point numbers can be converted to strings with the <code class="docutils literal notranslate"><span class="pre">str()</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="mf">1.23</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>str
</pre></div>
</div>
</div>
</div>
<p>Translating variables from one type to another will only be successul when the data in the variable can be reasonably converted.  One could not do <code class="docutils literal notranslate"><span class="pre">int('banana')</span></code> because there is no way to convert the string <code class="docutils literal notranslate"><span class="pre">'banana'</span></code> into integer data.</p>
</div>
<div class="section" id="input">
<h3>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h3>
<p>The other new ingredient needed to get a basic form of robo-adivising to work is the <code class="docutils literal notranslate"><span class="pre">input()</span></code> function.  Our goal is to build a tool that asks a user a series of questions such that the tool can then recommend an investment strategy based on those questions.  The <code class="docutils literal notranslate"><span class="pre">input()</span></code> function is the ingredient we’ll need to ask for user input into the tool.</p>
<p>Consider the example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">color</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;What is your favorite color?</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;User entered the response:&#39;</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>What is your favorite color?
purple
User entered the response: purple
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">input()</span></code> function prints out a string, given as the argument to the function.  The <code class="docutils literal notranslate"><span class="pre">input()</span></code> function waits for a response and then returns that response.  We store the returned value in a variable named <code class="docutils literal notranslate"><span class="pre">color</span></code>.  The second line of the code above simply prints out the response to verify that the <code class="docutils literal notranslate"><span class="pre">input()</span></code> function worked correctly.</p>
<p>Responses to the <code class="docutils literal notranslate"><span class="pre">input()</span></code> function are always strings.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">color</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;str&#39;&gt;
</pre></div>
</div>
</div>
</div>
<p>This means that if we want to use the response as something else, like an integer, we need to convert the data.</p>
<p>Let’s move to another example to really see the <code class="docutils literal notranslate"><span class="pre">input()</span></code> function in action.  This time, we’ll ask for the user’s age and print a response that is <em>conditional</em> on the user’s age.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">age</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;What is your age?</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Equity allocation percent:&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="o">-</span><span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>What is your age?
31
Equity allocation percent: 69
</pre></div>
</div>
</div>
</div>
<p>The output above represents the <em>rule of 100</em>.  One frequently proposed piece of investment advice is for younger people to invest more in stocks (which generally grow more in value than bonds, but are riskier) and for older people to invest more in bonds (which are less risky and thus potentially safer to live off of in retirement).  The rule of 100 is a trick for thinking about how much of a person’s portfolio should be in stocks: 100 minus your age is approximately the percentage of your wealth that should be in stocks.  Or so the rule goes, at least.  These notes are certainly not intended to serve as investment advice; the rule of 100 is just a convenient way to show up the utility of the <code class="docutils literal notranslate"><span class="pre">input()</span></code> function.</p>
<p>As another example of a conditional response, let’s ask the user how much risk they’re willing to take on.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_attitude</span><span class="p">():</span>
    <span class="n">attitude</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;How much risk are you willing to take on?</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">attitude</span> <span class="o">==</span> <span class="s1">&#39;not much&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Okay, we&#39;ll invest mostly in bonds.&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">attitude</span> <span class="o">==</span> <span class="s1">&#39;a lot&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Okey, we&#39;ll invest mostly in equities.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I&#39;m just a stupid robot, I can&#39;t understand you.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The goal, of course, is to get a sense of how much risk the user is willing to take on.  The robo-adivsor can allocate the user’s money into riskier investments (potentially earning higher returns) if the user is willing to bear the risk of those investment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">check_attitude</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>How much risk are you willing to take on?
a lot
Okey, we&#39;ll invest mostly in equities.
</pre></div>
</div>
</div>
</div>
<p>Of course, the problem here is that the input question, as stated above, is very open-ended.  A user could in all likelihood enter a response that is not expected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">check_attitude</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>How much risk are you willing to take on?
maybe a medium amount
I&#39;m just a stupid robot, I can&#39;t understand you.
</pre></div>
</div>
</div>
</div>
<p>Computers are getting better at open-ended questions.  The rise of artificial intelligence, and in particular a topic called <em>natural language understanding</em>, is helping with that.</p>
<p>For our use case, we will give the user a bit more guidance with the response we want.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_risk_preference</span><span class="p">():</span>
    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;On a scale of 1-5, how much do you dislike risk?  1=not bothered by risk, 5=extremely worried about risk.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">response</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sorry, response must be 1, 2, 3, 4, or 5&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I will guess that you meant to put 3&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">3</span>
    
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">get_risk_preference</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>On a scale of 1-5, how much do you dislike risk?  1=not bothered by risk, 5=extremely worried about risk.
4
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<p>With these ideas, we can begin to form the start of a robo-advisor.</p>
<p>First, apply the rule of 100 to get a baseline for how the debt-equity mix should be allocated.  Second, shift the allocation more towards stocks if the user is more okay with risk and shift the allocation more towards bonds if the user hates risk.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_allocation</span><span class="p">():</span>
    
    <span class="c1"># get user&#39;s age</span>
    <span class="n">age</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;What is your age?  Enter it as a numberic argument (e.g. &quot;50&quot;, not &quot;fifty&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="c1"># apply rule of 100</span>
    <span class="n">equity_weight</span> <span class="o">=</span> <span class="mi">100</span><span class="o">-</span><span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
    
    <span class="c1"># get user&#39;s risk preference</span>
    <span class="n">preference</span> <span class="o">=</span> <span class="n">get_risk_preference</span><span class="p">()</span>
    
    <span class="c1"># shift the allocation according to the user&#39;s preference</span>
    <span class="k">if</span> <span class="n">preference</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">equity_weight</span> <span class="o">+=</span> <span class="mi">10</span>
    <span class="k">elif</span> <span class="n">preference</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">equity_weight</span> <span class="o">+=</span> <span class="mi">5</span>
    <span class="k">elif</span> <span class="n">preference</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">equity_weight</span> <span class="o">-=</span> <span class="mi">5</span>
    <span class="k">elif</span> <span class="n">preference</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
        <span class="n">equity_weight</span> <span class="o">-=</span> <span class="mi">10</span>
        
    <span class="c1"># correct weights to stick within 0-100</span>
    <span class="n">equity_weight</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">equity_weight</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">equity_weight</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">equity_weight</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    
    <span class="n">debt_weight</span> <span class="o">=</span> <span class="mi">100</span><span class="o">-</span><span class="n">equity_weight</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;I would recommend&#39;</span><span class="p">,</span> <span class="n">equity_weight</span><span class="p">,</span> <span class="s1">&#39;percent stocks and &#39;</span><span class="p">,</span> <span class="n">debt_weight</span><span class="p">,</span> <span class="s1">&#39;percent bonds&#39;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="p">[</span><span class="n">equity_weight</span><span class="p">,</span> <span class="n">debt_weight</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">get_allocation</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>What is your age?  Enter it as a numberic argument (e.g. &quot;50&quot;, not &quot;fifty&quot;)
31
On a scale of 1-5, how much do you dislike risk?  1=not bothered by risk, 5=extremely worried about risk.
5
I would recommend 59 percent stocks and  41 percent bonds
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[59, 41]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="homework-assignment">
<h2>Homework Assignment<a class="headerlink" href="#homework-assignment" title="Permalink to this headline">¶</a></h2>
<div class="section" id="project-valuation-npv-vs-irr">
<h3>Project Valuation: NPV vs. IRR<a class="headerlink" href="#project-valuation-npv-vs-irr" title="Permalink to this headline">¶</a></h3>
<p>In finance, we value a stream of future cash flows by discounting these to the present period.  For example, suppose a division manager at a firm wishes to determine whether a new investment project is worth purusing.  How should the manager make this decision?  One method to do this is with net present value (NPV).  Another is with internal rate of return (IRR).  You should have heard of both of these before, and will probably remember that NPV is the preferred approach.  As your first Python exercise, you’ll get to prove to/remind yourself why one should <em>not</em> use IRR.</p>
<p>For your convenience, both the NPV and IRR decision rules are reviewed here.</p>
<p><strong>Net Present Value</strong></p>
<p>A project with cash outflow at time <span class="math notranslate nohighlight">\(0\)</span>, future cash flows <span class="math notranslate nohighlight">\(C_1, C_2, ...\)</span>, and discount rate <span class="math notranslate nohighlight">\(r\)</span> is undertaken if:</p>
<div class="math notranslate nohighlight">
\[
-C_0 + \sum_{t=1}^T \frac{CF_t}{(1+r)^t} &gt; 0
\]</div>
<p>where <span class="math notranslate nohighlight">\(T\)</span> is the number of years that the project lasts.</p>
<p><strong>Internal Rate of Return</strong></p>
<p>A project with cash outflow at time <span class="math notranslate nohighlight">\(0\)</span>, future cash flows <span class="math notranslate nohighlight">\(C_1, C_2, ...\)</span>, and required rate of return <span class="math notranslate nohighlight">\(h\)</span> is undertaken if:</p>
<div class="math notranslate nohighlight">
\[
r &gt; h
\]</div>
<p>where <span class="math notranslate nohighlight">\(r\)</span> solves</p>
<div class="math notranslate nohighlight">
\[
-C_0 + \sum_{t=1}^T \frac{CF_t}{(1+r)^t} = 0.
\]</div>
<p>We usually refer to <span class="math notranslate nohighlight">\(h\)</span> as the hurdle rate.</p>
<p><strong>Homework Format</strong></p>
<p>When homework assignments are presented as Jupyter notebooks (as is the case here), you will be expected to edit some of the Python code to complete a problem.  Not all of the code requires editing.  The parts of the Python code that need to be completed by you are marked in comments blocks.</p>
<p>For example, suppose that you are asked to complete the following function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">leverage_ratio</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">E</span><span class="p">):</span>
    <span class="c1">### start code here (~ 1 line)</span>
    <span class="n">ratio</span> <span class="o">=</span> 
    <span class="c1">### end code here</span>
    <span class="k">return</span> <span class="n">ratio</span>
</pre></div>
</div>
<p>That is, you are asked to complete the function named <code class="docutils literal notranslate"><span class="pre">leverage_ratio()</span></code> so that when a user provides values for <code class="docutils literal notranslate"><span class="pre">D</span></code> and <code class="docutils literal notranslate"><span class="pre">E</span></code> to the function, the function returns the leverage ratio based on these values.  The code that you are expected to modify is nested within the lines <code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">start</span> <span class="pre">code</span> <span class="pre">here</span></code> and <code class="docutils literal notranslate"><span class="pre">###</span> <span class="pre">end</span> <span class="pre">code</span> <span class="pre">here</span></code>.  Do not change any code outside of these blocks.  The correct answer to this hypothetical problem would, of course, be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">leverage_ratio</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">E</span><span class="p">):</span>
    <span class="c1">### start code here (~ 1 line)</span>
    <span class="n">ratio</span> <span class="o">=</span> <span class="n">D</span> <span class="o">/</span> <span class="p">(</span><span class="n">D</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>
    <span class="c1">### end code here</span>
    <span class="k">return</span> <span class="n">ratio</span>
</pre></div>
</div>
<p><strong>Tutorial: NPV and IRR with Numpy</strong></p>
<p>For your homework, you will calculate the NPV and IRR of various possible scenarios.  The exceptionally popular <em>numpy</em> module includes functions that make calculating NPV and IRR simple.</p>
<p>Begin by running the following block of code to import the numpy module.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span> <span class="c1"># ignore this</span>
</pre></div>
</div>
</div>
</div>
<p>For a project that requires a cash outlay of <span class="math notranslate nohighlight">\(\$100\)</span> today, and cash inflows of <span class="math notranslate nohighlight">\(\$23\)</span> for the next five years, the npv of the project is calculated in Python by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">npv</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span><span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">])</span>
</pre></div>
</div>
<p>assuming a discount rate of <span class="math notranslate nohighlight">\(5\%\)</span>.  To calculate the IRR of the project, we run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">irr</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">])</span>
</pre></div>
</div>
<p>The following block of code runs and prints these two calculations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project_npv</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">npv</span><span class="p">(</span><span class="n">rate</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span><span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">])</span>
<span class="n">project_irr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">irr</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">23</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">project_npv</span><span class="p">,</span><span class="n">project_irr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-0.42203657549117324 0.04847191052053912
</pre></div>
</div>
</div>
</div>
<p>You should notice that the NPV of the stream of cash flows is negative, suggesting that this isn’t a project that you’d want to take on.  Note too that the IRR is less than the discount rate, which is another sign that this is a bad project.  In the following exercises, you’ll see that NPV and IRR can give you inconsistent implications about project quality.</p>
<p><strong>Question 1 – Delayed Investment</strong></p>
<p>Suppose that have just retired as the CEO of a successful company.  A major publisher has offered you a book deal. The publisher will pay you <span class="math notranslate nohighlight">\(\$1\)</span> million upfront if you agree to write a book about your experiences. You estimate that it will take three years to write the book. The time you spend writing will cause you to give up speaking engagements amounting to <span class="math notranslate nohighlight">\(\$500,000\)</span> per year. You estimate your opportunity cost to be <span class="math notranslate nohighlight">\(10\%\)</span>.</p>
<p>Calculate the NPV of the deal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### start code here (~ 1 line)</span>

<span class="c1">### end code here</span>
</pre></div>
</div>
</div>
</div>
<p>The expected output is (check your code if the prinout does not match this number):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="mf">243425.99549211108</span>
</pre></div>
</div>
<p>Next, calculate the IRR of the deal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### start code here (~ 1 line)</span>

<span class="c1">### end code here</span>
</pre></div>
</div>
</div>
</div>
<p>The expected output is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mf">0.23375192852825855</span>
</pre></div>
</div>
<p><strong>Question 2 – Multiple IRRs</strong></p>
<p>Suppose that instead of receiving <span class="math notranslate nohighlight">\(\$1\)</span> million up front, the publisher offers <span class="math notranslate nohighlight">\(\$550,000\)</span> advance and <span class="math notranslate nohighlight">\(\$1\)</span> million in four years when the book is published.</p>
<p>Calculate the NPV of the deal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### start code here (~ 1 line)</span>

<span class="c1">### end code here</span>
</pre></div>
</div>
</div>
</div>
<p>Now calculate the IRR of the deal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### start code here (~ 1 line)</span>

<span class="c1">### end code here</span>
</pre></div>
</div>
</div>
</div>
<p>You should find that the NPV is negative, but the IRR is positive.  To see what’s going wrong here, recall tha the IRR is the discount rate that sets the cash flow stream to zero net present value.  In the <code class="docutils literal notranslate"><span class="pre">np.irr()</span></code> call above, Python returned an IRR to you.  But it’s not the only possible IRR for this problem!  Mathematically, certain cash flow streams can have <em>multiple</em> IRRs that would set the cash flow stream to zero net present value.  To see this happen, plot the NPV for this cash flow stream over a range of possible discount rates (you’ll find two that set the NPV to zero, one was the answer that <code class="docutils literal notranslate"><span class="pre">np.irr()</span></code> gave you above).  For this problem, you should include discount rates over the range <span class="math notranslate nohighlight">\([0.01,0.51]\)</span>.</p>
<p>Hint: to loop over rates between <span class="math notranslate nohighlight">\([0.01,0.51]\)</span>, one can use the <code class="docutils literal notranslate"><span class="pre">np.arange()</span></code> function with a third argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">0.53</span><span class="p">,</span><span class="mf">0.02</span><span class="p">):</span>
    <span class="o">...</span> <span class="c1"># things inside the for loop happen here</span>
</pre></div>
</div>
<p>and <span class="math notranslate nohighlight">\(r\)</span> will take values <span class="math notranslate nohighlight">\([0.01,0.03,0.05,...,.0.49,0.051]\)</span>. The third argument controls the <em>step size</em>, which is how much the loop increments each time (the default is to go up by <span class="math notranslate nohighlight">\(1\)</span>).  The function <code class="docutils literal notranslate"><span class="pre">range()</span></code> which we used in class cannot use decimal numbers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># leave these four lines as is, they are needed to get the plot function working</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># define any empty lists you need here</span>
<span class="c1">### start code here (~ 2 lines)</span>
<span class="n">rate_list</span> <span class="o">=</span>
<span class="n">npv_list</span> <span class="o">=</span>
<span class="c1">### end code here</span>

<span class="c1"># loop over rates from 0.01 to 0.51, incrementing by 0.02 each time</span>
<span class="c1">### start code here (~ 3 lines)</span>
<span class="k">for</span>
    <span class="c1"># inside the loop, calculate the NPV.  Update any lists that may need updating</span>
    <span class="n">npv_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>  <span class="p">)</span>
    <span class="n">rate_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>  <span class="p">)</span>
    
<span class="c1">### end code here</span>

<span class="c1"># plot the NPV for each rate you considered here</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rate_list</span><span class="p">,</span> <span class="n">npv_list</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>You should observe a U-shaped curve that appears to cross the line somewhere below 0.1 as well as somewhere above 0.3.  These are two valid IRRs for the question.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ch0"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="../intro.html" title="previous page">Financial Modeling and Analytics</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By James Nordlund, Ph.D.<br/>
        
          <div class="extra_footer">
            <p>
  Copyright 2021.  License: CC BY-NC-ND 4.0
</p>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>